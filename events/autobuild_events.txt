namespace = autobuild
## 0 - cost and farms vars
## 1 - auto impruve
## 2 - auto update influence cost
## 3 - auto build new buildings on good tiles 		
## 4 - auto enslave
## 4_1 - xeno slaves
## 4_2 - replace power plants and labs if slave
## 5 - auto build labs by good planet
## 6 - auto build labs by semi random
## 7 - auto build in ept tiles:
## 7_1 only power
## 7_2 only mines
## 7_3 only labs
## 7_4 scientific priority (power for labs) 1 power for 4 labs
## 7_5 to do resource priority (power and mines by emp priority)
## 7_6 1 (mine) : 1 (power) : 1 (lab)
## 7_7 0 : 1 : 1
## 7_8 ignore mins
## 7_9 ignore food
## 7_10 ignore energy
## 7_11 ignore science
## 8 - clinics
## 9 - mineral silo
## 10 - clean tiles
## 11 - energy hub
## 12 - minerals complex
## spec planets

fleet_event = {
	id = autobuild.0
	title = OK
	desc = OK
	hide_window = yes
	is_triggered_only = yes
	#fire_only_once = yes
	
	trigger = {
		is_ship_class = shipclass_constructor
		is_disabled = no
	#	sector_controlled = yes
		is_in_combat = no
	}
	
	immediate = {
		set_fleet_flag = autobuild_fleet
		queue_actions = {
			repeat = {
				find_closest_system = {
					trigger = {
						id = "autobuild.0.trigger.1"
						exists = space_owner
						space_owner = {
							is_country = root.owner
						}
						nor = {
							any_ship_in_system = {
								exists = owner
								owner = {
									is_hostile = root
								}
							}
							has_star_flag = autobuild_star_block
						}
						any_planet = {
							not = { exists = owner }
							has_mining_station = no
							has_research_station = no
							not = { has_planet_flag = autobuild_planet_block }
							is_surveyed = {
								who = root.owner
								status = yes
							}
							or = {
								has_deposit_for = shipclass_mining_station
								has_deposit_for = shipclass_research_station
							}
						}
						root = {
							nor = {
								has_fleet_order = upgrade_design_fleet_order
								has_fleet_order = repair_ship_fleet_order
								has_fleet_order = return_fleet_order
								has_fleet_order = evade_hostiles_order
								has_fleet_order = build_orbital_station_order
						#		has_fleet_order = orbit_planet_order
						#		has_fleet_order = move_to_system_point_order
								has_fleet_order = orbit_planet_order
								has_fleet_order = build_space_station_order
								has_fleet_order = follow_order
								has_fleet_order = merge_fleet_order
								has_fleet_order = aggressive_stance_fleet_order
							}
						}
					}
					found_system = {
						effect = {
							id = "autobuild.0.effect.0"
							if = {
								limit = {
									not = { has_star_flag = autobuild_planet_block }
								}
								set_timed_star_flag = { flag = autobuild_star_block days = 120 }
							}
						}
						move_to = this
					}
				}
				find_closest_planet = {
					trigger = {
						id = "autobuild.0.trigger.2"
						nor = {
							exists = owner
							has_planet_flag = autobuild_planet_block
						}
						root = {
							nor = {
								has_fleet_order = upgrade_design_fleet_order
								has_fleet_order = repair_ship_fleet_order
								has_fleet_order = return_fleet_order
								has_fleet_order = evade_hostiles_order
								has_fleet_order = build_orbital_station_order
						#		has_fleet_order = orbit_planet_order
						#		has_fleet_order = move_to_system_point_order
								has_fleet_order = orbit_planet_order
								has_fleet_order = build_space_station_order
								has_fleet_order = follow_order
								has_fleet_order = merge_fleet_order
								has_fleet_order = aggressive_stance_fleet_order
							}
						}
						has_mining_station = no
						has_research_station = no
						is_surveyed = {
							who = root.owner
							status = yes
						}
						or = {
							has_deposit_for = shipclass_mining_station
							has_deposit_for = shipclass_research_station
						}
					}
					found_planet = {
						effect = {
							id = "autobuild.0.effect.1"
							if = {
								limit = {
									not = { has_planet_flag = autobuild_planet_block }
								}
								set_timed_planet_flag = { flag = autobuild_planet_block days = 120 }
								else = {
									root = {
										clear_fleet_actions = root
										fleet_event = { id = autobuild.0}
									}
								}
							}
						}
						orbit_planet = this
						effect = {
							id = "autobuild.0.effect.2"
							root = { set_event_locked = yes }
						}
						wait = {
							duration = 100
						}
						effect = {
							id = "autobuild.0.effect.3"
							root = { set_event_locked = no }
							if = {
								limit = {
									root.owner = {
										minerals > 100
										or = {
											not = { has_country_flag = auto_build_cost }
											and = {
												has_country_flag = auto_build_cost_5000
												minerals > 5000
											}
											and = {
												has_country_flag = auto_build_cost_2500
												minerals > 2500
											}
											and = {
												has_country_flag = auto_build_cost_1000
												minerals > 1000
											}
											and = {
												has_country_flag = auto_build_cost_500
												minerals > 500
											}
										}
									}
								}
								if = {
									limit = { has_deposit_for = shipclass_mining_station }
									create_mining_station = {
										owner = root.owner
									}
									root.owner = {
										add_minerals = -90
									}
									else = {
										if = {
											limit = { has_deposit_for = shipclass_research_station }
											create_research_station = {
												owner = root.owner
											}
											root.owner = {
												add_minerals = -90
											}
										}
									}
								}
							}
						}
					}
				}
			}
		}
	}
}

country_event = {
	id = autobuild.1
	title = OK
	desc = OK
	hide_window = yes
	mean_time_to_happen = { months = 6 }

	trigger = {
		is_ai = no
		or = {
			has_country_flag = auto_build_1
			has_country_flag = auto_build_2
			has_country_flag = auto_build_3
			has_country_flag = auto_build_4
			has_country_flag = auto_build_4_1
			has_country_flag = auto_build_4_2
			has_country_flag = auto_build_5
			has_country_flag = auto_build_6
			has_country_flag = auto_build_7_1
			has_country_flag = auto_build_7_2
			has_country_flag = auto_build_7_3
			has_country_flag = auto_build_7_4
		##	has_country_flag = auto_build_7_5
			has_country_flag = auto_build_7_6
			has_country_flag = auto_build_7_7
			has_country_flag = auto_build_8
			has_country_flag = auto_build_9
			has_country_flag = auto_build_10
			has_country_flag = auto_build_11
			any_owned_planet = {
				or = {
					has_modifier = "planet_forge_auto_build"
					has_modifier = "planet_power_plant_auto_build"
					has_modifier = "planet_labs_auto_build"
					has_modifier = "planet_farms_auto_build"
				}
			}
		}
	}

	immediate = {

		save_event_target_as = autobuild_country
		
		## auto enslave ##
		if = {
			limit = { has_country_flag = auto_build_4 }
			every_owned_planet = {
				limit = { not = { has_modifier = "free_from_auto_enslave" } }
				every_tile = {
					if = {
						limit = {
							exists = pop
							pop = { is_robot = no }
							or = {
								has_any_mines = yes
								has_any_farm = yes									
								has_building = "building_colony_shelter"
								has_building = "building_capital_1"
								has_building = "building_capital_2"
								has_building = "building_capital_3"
								has_building = "building_clinic"
								has_building = "building_ancient_factory"
								has_building = "building_agri_processing_complex"
								has_building = "building_great_pyramid"
								and = {
									exists = owner
									owner = { has_country_flag = auto_build_4_1 }
									pop = {
										is_being_purged = no
										not = { is_same_species = owner.species }
									}
								}
							}
						}
						if = {
							limit = {
								exists = owner
								owner = {
									or = {
										has_policy_flag = slavery_allowed_regulated_xenos_only
										has_policy_flag = slavery_allowed_xenos_only
									}
								}
								pop = {
									is_being_purged = no
									not = { is_same_species = owner.species }
									is_enslaved = no
								}
							}
							pop = { enslave_pop = yes }
						}
						if = {
							limit = {
								exists = owner
								owner = {
									or = {
										has_policy_flag = slavery_allowed_regulated
										has_policy_flag = slavery_allowed_all
									}
								}
								pop = {
									is_being_purged = no
									is_enslaved = no
								}
							}
							pop = { enslave_pop = yes }
						}
						if = {
							limit = {
								exists = owner
								owner = { has_policy_flag = ai_servitude }
								pop = {
									is_being_purged = no
									is_enslaved = no
									is_species = "ROBOT_POP_SPECIES_3"
								}
							}
							pop = { enslave_pop = yes }
						}
						else = {
							if = {
								limit = {
									exists = pop
									pop = {
										is_being_purged = no
										is_enslaved = yes
									}
								}
								pop = { enslave_pop = no }
							}
						}
					}
				}
			}
		}

		## replace power plants and labs if slave ##

		if = {
			limit = {
				has_country_flag = auto_build_4_2
				or = {
					not = { has_country_flag = auto_build_cost }
					and = {
						has_country_flag = auto_build_cost_5000
						minerals > 5000
					}
					and = {
						has_country_flag = auto_build_cost_2500
						minerals > 2500
					}
					and = {
						has_country_flag = auto_build_cost_1000
						minerals > 1000
					}
					and = {
						has_country_flag = auto_build_cost_500
						minerals > 500
					}
				}
			}
			every_owned_planet = {
				if = {
					limit = {
						free_from_autobuild = no
						or = {
							has_building = "building_capital_1"
							has_building = "building_capital_2"
							has_building = "building_capital_3"
						}
					}
					every_tile = {
						limit = {
							exists = pop
							pop = {
								is_being_purged = no
								is_enslaved = yes
							}
							or = {
								has_any_power_plant = yes
								has_any_science_lab = yes
							}
						}
						add_building_construction = "building_mining_network_1"
					}
					else = {
						if = {
							limit = {
								free_from_autobuild = no
								has_building = "building_colony_shelter"
							}
							every_tile = {
								limit = {
									exists = pop
									pop = {
										is_being_purged = no
										is_enslaved = yes
									}
									or = {
										has_any_power_plant = yes
										has_any_science_lab = yes
									}
								}
								add_building_construction = "building_basic_mine"
							}
						}
					}
				}
			}
		}

		## auto build in ept tiles ##

		if = {
			limit = {
				or = {
					has_country_flag = auto_build_7_1
					has_country_flag = auto_build_7_2
					has_country_flag = auto_build_7_3
					has_country_flag = auto_build_7_4
		#			has_country_flag = auto_build_7_5
					has_country_flag = auto_build_7_6
					has_country_flag = auto_build_7_7
				}
				or = {
					not = { has_country_flag = auto_build_cost }
					and = {
						has_country_flag = auto_build_cost_5000
						minerals > 5000
					}
					and = {
						has_country_flag = auto_build_cost_2500
						minerals > 2500
					}
					and = {
						has_country_flag = auto_build_cost_1000
						minerals > 1000
					}
					and = {
						has_country_flag = auto_build_cost_500
						minerals > 500
					}
				}
			}
			every_owned_planet = {
				if = {
					limit = {
						free_from_autobuild = no
						free_building_tiles > 0
						or = {
							has_building = "building_capital_1"
							has_building = "building_capital_2"
							has_building = "building_capital_3"
						}
					}
					every_tile = {
						limit = {
							has_building = no
							exists = pop
							pop = {
								is_being_purged = no
								is_slavebot = yes
							}
							tile_has_any_res = no
						}
						add_building_construction = "building_mining_network_1"
					}
					else = {
						if = {
							limit = {
								free_from_autobuild = no
								free_building_tiles > 0
								has_building = "building_colony_shelter"
							}
							every_tile = {
								limit = {
									has_building = no
									exists = pop
									pop = {
										is_being_purged = no
										is_slavebot = yes
									}
									tile_has_any_res = no
								}
								add_building_construction = "building_basic_mine"
							}
						}
					}
				}
			}

			switch = {
		
				trigger = has_country_flag

				auto_build_7_1 = {
					every_owned_planet = {
						if = {
							limit = {
								free_from_autobuild = no
								free_building_tiles > 0
								or = {
									has_building = "building_capital_1"
									has_building = "building_capital_2"
									has_building = "building_capital_3"
								}
							}
							every_tile = {
								limit = {
									has_building = no
									exists = pop
									pop = { is_being_purged = no }
									tile_has_any_res = no
								}
								add_building_construction = "building_power_plant_1"
							}
							else = {
								if = {
									limit = {
										free_from_autobuild = no
										free_building_tiles > 0
										has_building = "building_colony_shelter"
									}
									every_tile = {
										limit = {
											has_building = no
											exists = pop
											pop = { is_being_purged = no }
											tile_has_any_res = no
										}
										add_building_construction = "building_basic_power_plant"
									}
								}
							}
						}
					}
				}
				
				auto_build_7_2 = {
					every_owned_planet = {
						if = {
							limit = {
								free_from_autobuild = no
								free_building_tiles > 0
								or = {
									has_building = "building_capital_1"
									has_building = "building_capital_2"
									has_building = "building_capital_3"
								}
							}
							every_tile = {
								limit = {
									has_building = no
									exists = pop
									pop = { is_being_purged = no }
									tile_has_any_res = no
								}
								add_building_construction = "building_mining_network_1"
							}
							else = {
								if = {
									limit = {
										free_from_autobuild = no
										free_building_tiles > 0
										has_building = "building_colony_shelter"
									}
									every_tile = {
										limit = {
											has_building = no
											exists = pop
											pop = { is_being_purged = no }
											tile_has_any_res = no
										}
										add_building_construction = "building_basic_mine"
									}
								}
							}
						}
					}
				}

				auto_build_7_3 = {
					every_owned_planet = {
						if = {
							limit = {
								free_from_autobuild = no
								free_building_tiles > 0
							}
							every_tile = {
								limit = {
									has_building = no
									exists = pop
									pop = { is_being_purged = no }
									tile_has_any_res = no
								}
								add_building_construction = "building_basic_science_lab_1"
							}
						}
					}
				}

				auto_build_7_4 = {
					every_owned_planet = {
						if = {
							limit = {
								free_from_autobuild = no
								free_building_tiles > 0
								or = {
									has_building = "building_capital_1"
									has_building = "building_capital_2"
									has_building = "building_capital_3"
								}
							}
							every_tile = {
								limit = {
									has_building = no
									exists = pop
									pop = { is_being_purged = no }
									tile_has_any_res = no
								}
								random_list = {
									80 = { add_building_construction = "building_basic_science_lab_1" }
									20 = { add_building_construction = "building_power_plant_1" }
								}
							}
							else = {
								if = {
									limit = {
										free_from_autobuild = no
										free_building_tiles > 0
										has_building = "building_colony_shelter"
									}
									every_tile = {
										limit = {
											has_building = no
											exists = pop
											pop = { is_being_purged = no }
											tile_has_any_res = no
										}
										random_list = {
											80 = { add_building_construction = "building_basic_science_lab_1" }
											20 = { add_building_construction = "building_basic_power_plant" }
										}
									}
								}
							}
						}
					}
				}
			
				## to do build by emp prior ##
								
				auto_build_7_6 = {
					every_owned_planet = {
						if = {
							limit = {
								free_from_autobuild = no
								free_building_tiles > 0
								or = {
									has_building = "building_capital_1"
									has_building = "building_capital_2"
									has_building = "building_capital_3"
								}
							}
							every_tile = {
								limit = {
									has_building = no
									exists = pop
									pop = { is_being_purged = no }
									tile_has_any_res = no
								}
								random_list = {
									33 = { add_building_construction = "building_basic_science_lab_1" }
									33 = { add_building_construction = "building_power_plant_1" }
									33 = { add_building_construction = "building_mining_network_1" }
								}
							}
							else = {
								if = {
									limit = {
										free_from_autobuild = no
										free_building_tiles > 0
										has_building = "building_colony_shelter"
									}
									every_tile = {
										limit = {
											has_building = no
											exists = pop
											pop = { is_being_purged = no }
											tile_has_any_res = no
										}
										random_list = {
											33 = { add_building_construction = "building_basic_science_lab_1" }
											33 = { add_building_construction = "building_basic_power_plant" }
											33 = { add_building_construction = "building_basic_mine" }
										}
									}
								}
							}
						}
					}
				}

				auto_build_7_7 = {
					every_owned_planet = {
						if = {
							limit = {
								free_from_autobuild = no
								free_building_tiles > 0
								or = {
									has_building = "building_capital_1"
									has_building = "building_capital_2"
									has_building = "building_capital_3"
								}
							}
							every_tile = {
								limit = {
									has_building = no
									exists = pop
									pop = { is_being_purged = no }
									tile_has_any_res = no
								}
								random_list = {
									50 = { add_building_construction = "building_basic_science_lab_1" }
									50 = { add_building_construction = "building_power_plant_1" }
								}
							}
							else = {
								if = {
									limit = {
										free_from_autobuild = no
										free_building_tiles > 0
										has_building = "building_colony_shelter"
										}
									every_tile = {
										limit = {
											has_building = no
											exists = pop
											pop = { is_being_purged = no }
											tile_has_any_res = no
										}
										random_list = {
											50 = { add_building_construction = "building_basic_science_lab_1" }
											50 = { add_building_construction = "building_basic_power_plant" }
										}
									}
								}
							}
						}
					}
				}
			}
		}

		## auto build new buildings on good tiles ##

		if = {
			limit = {
				has_country_flag = auto_build_3
				or = {
					not = { has_country_flag = auto_build_cost }
					and = {
						has_country_flag = auto_build_cost_5000
						minerals > 5000
					}
					and = {
						has_country_flag = auto_build_cost_2500
						minerals > 2500
					}
					and = {
						has_country_flag = auto_build_cost_1000
						minerals > 1000
					}
					and = {
						has_country_flag = auto_build_cost_500
						minerals > 500
					}
				}
			}
			every_owned_planet = {
				if = {
					limit = {
						free_from_autobuild = no
						free_building_tiles > 0
						
					}
					if = {
						limit = {
							or = {
								has_building = "building_capital_1"
								has_building = "building_capital_2"
								has_building = "building_capital_3"
							}
						}
						event_target:autobuild_country = {
							set_variable = {
								which = autobuild_farm_planet
								value = 0
							}
						}
						every_tile = {
							limit = { has_any_farm = yes }
							event_target:autobuild_country = {
								change_variable = {
									which = autobuild_farm_planet
									value = 1
								}
							}
						}
						random_tile = {
							limit = {
								has_building = no
								exists = pop
								pop = {
									is_being_purged = no
									is_slavebot = no
								}
								has_resource = {
									type = sr_alien_pets
									amount > 0
								}
							}
							add_building_construction = "building_xeno_zoo"
						}
						random_tile = {
							limit = {
								has_building = no
								exists = pop
								pop = {
									is_being_purged = no
									is_slavebot = no
								}
								has_resource = {
									type = sr_betharian
									amount > 0
								}
							}
							add_building_construction = "betharian_power_plant_1"
						}
						every_tile = {
							limit = {
								has_building = no
								exists = pop
								pop = {
									is_being_purged = no
									is_slavebot = no
								}
								tile_has_science_more_than_others = yes
							}
							add_building_construction = "building_basic_science_lab_1"
						}
						every_tile = {
							limit = {
								has_building = no
								exists = pop
								pop = {
									is_being_purged = no
									is_slavebot = no
								}
								tile_has_energy_more_than_others = yes
							}
							add_building_construction = "building_power_plant_1"
						}
						every_tile = {
							limit = {
								has_building = no
								exists = pop
								pop = { is_being_purged = no }
								tile_has_minerals_more_than_others = yes
							}
							add_building_construction = "building_mining_network_1"
						}
						every_tile = {
							limit = {
								tile_has_food_more_than_others = yes
								has_blocker = no
								has_building = no
								event_target:autobuild_country = {
									check_variable = {
										which = autobuild_farm_planet
										value < autobuild_farm_global
									}
								}
							}
							event_target:autobuild_country = {
								change_variable = {
									which = autobuild_farm_planet
									value = 1
								}
							}
							if = {
								limit = {
									or = {
										exists = pop
										planet = {
											has_building_construction = no
											has_any_farm = no
										}
									}
								}
								add_building_construction = "building_hydroponics_farm_1"
							}
						}
						else = {
							if = {
								limit = {
									has_building = "building_colony_shelter"
								}
								event_target:autobuild_country = {
									set_variable = {
										which = autobuild_farm_planet
										value = 0
									}
								}
								every_tile = {
									limit = { has_any_farm = yes }
									event_target:autobuild_country = {
										change_variable = {
											which = autobuild_farm_planet
											value = 1
										}
									}
								}
								every_tile = {
									limit = {
										tile_has_food_more_than_others = yes
										has_blocker = no
										has_building = no
										event_target:autobuild_country = {
											check_variable = {
												which = autobuild_farm_planet
												value < autobuild_farm_global
											}
										}
									}
									event_target:autobuild_country = {
										change_variable = {
											which = autobuild_farm_planet
											value = 1
										}
									}
									if = {
										limit = {
											or = {
												exists = pop
												planet = {
													has_building_construction = no
													has_any_farm = no
												}
											}
										}
										add_building_construction = "building_basic_farm"
									}
								}
								every_tile = {
									limit = {
										has_building = no
										exists = pop
										pop = {
											is_being_purged = no
											is_slavebot = no
										}
										tile_has_science_more_than_others = yes
									}
									add_building_construction = "building_basic_science_lab_1"
								}
								every_tile = {
									limit = {
										has_building = no
										exists = pop
										pop = {
											is_being_purged = no
											is_slavebot = no
										}
										tile_has_energy_more_than_others = yes
									}
									add_building_construction = "building_basic_power_plant"
								}
								every_tile = {
									limit = {
										has_building = no
										exists = pop
										pop = { is_being_purged = no }
										tile_has_minerals_more_than_others = yes
									}
									add_building_construction = "building_basic_mine"
								}
							}
						}
					}
				}
			}
		}

		## auto build clinics ##

		if = {
			limit = {
				has_country_flag = auto_build_8
				or = {
					not = { has_country_flag = auto_build_cost }
					and = {
						has_country_flag = auto_build_cost_5000
						minerals > 5000
					}
					and = {
						has_country_flag = auto_build_cost_2500
						minerals > 2500
					}
					and = {
						has_country_flag = auto_build_cost_1000
						minerals > 1000
					}
					and = {
						has_country_flag = auto_build_cost_500
						minerals > 500
					}
				}
			}
			every_owned_planet = {
				limit = {
					is_ringworld = no
					or = {
						free_building_tiles > 0
						has_building = "building_basic_farm"
						has_building = "building_hydroponics_farm_1"
						has_building = "building_hydroponics_farm_2"
						has_building = "building_hydroponics_farm_3"
						has_building = "building_hydroponics_farm_4"
						has_building = "building_hydroponics_farm_5"
					}
					nor = {
						has_modifier = "capital"
						has_building = "building_clinic"
						has_building = "building_hospital"
						is_planet_class = pc_gaia
						has_modifier = "free_from_auto_build"
					}
					count_pops = {
						limit = { is_enslaved = no }
						count > 0
					}
				}
				event_target:autobuild_country = {
					set_variable = {
						which = autobuild_clinic
						value = 0
					}
				}
				every_tile = {
					limit = { exists = pop }
					pop = {
						save_event_target_as = autobuild_clinic_pop
						if = {
							limit = {
								planet = {
									habitability = { 
										who = event_target:autobuild_clinic_pop
										value < 1
									}
								}
							}
							event_target:autobuild_country = {
								change_variable = {
									which = autobuild_clinic
									value = 1
								}
							}
						}
					}
				}
				if = {
					limit = {
						event_target:autobuild_country = {
							check_variable = {
								which = autobuild_clinic
								value > 3								# 4 pops at least
							}
						}
					}
					every_tile = {										# try found best tile
						limit = {
							has_blocker = no
							tile_has_food_more_than_others = yes
							autobuild_tile_not_has_building = yes
						}
						add_building_construction = "building_clinic"
						event_target:autobuild_country = {
							set_variable = {
								which = autobuild_clinic
								value = 0
							}
						}
					}
				}
				if = {
					limit = {
						event_target:autobuild_country = {
							check_variable = {
								which = autobuild_clinic
								value > 3								# 4 pops at least
							}
						}
					}
					every_tile = {
						limit = {
							autobuild_tile_not_has_building = yes
							has_blocker = no
							tile_has_any_res = no
						}
						add_building_construction = "building_clinic"
						event_target:autobuild_country = {
							set_variable = {
								which = autobuild_clinic
								value = 0
							}
						}
					}
				}
			}
		}

		## auto build mineral silo ##

		if = {
			limit = {
				has_country_flag = auto_build_9
				or = {
					not = { has_country_flag = auto_build_cost }
					and = {
						has_country_flag = auto_build_cost_5000
						minerals > 5000
					}
					and = {
						has_country_flag = auto_build_cost_2500
						minerals > 2500
					}
					and = {
						has_country_flag = auto_build_cost_1000
						minerals > 1000
					}
					and = {
						has_country_flag = auto_build_cost_500
						minerals > 500
					}
				}
			}
			every_owned_planet = {
				limit = {
					free_from_autobuild = no
					is_ringworld = no
					free_building_tiles > 0
					nor = {
						has_building = "building_mineral_silo_1"
						has_building = "building_mineral_silo_2"
						has_building = "building_mineral_silo_3"
						has_modifier = "capital"
						is_planet_class = pc_gaia
					}
					or = {
						has_building = "building_capital_1"
						has_building = "building_capital_2"
						has_building = "building_capital_3"
					}
				}
				random_tile = {
					limit = {
						has_building = no
						has_blocker = no
						tile_has_any_res = no
					}
					add_building_construction = "building_mineral_silo_1"
				}
			}
		}
		
		## auto clean
		
		if = {
			limit = {
				has_country_flag = auto_build_10
				energy > 100
				minerals > 100
				or = {
					not = { has_country_flag = auto_build_cost }
					and = {
						has_country_flag = auto_build_cost_5000
						minerals > 5000
						energy > 5000
					}
					and = {
						has_country_flag = auto_build_cost_2500
						minerals > 2500
						energy > 2500
					}
					and = {
						has_country_flag = auto_build_cost_1000
						minerals > 1000
						energy > 1000
					}
					and = {
						has_country_flag = auto_build_cost_500
						minerals > 500
						energy > 500
					}
				}
			}
			every_owned_planet = {
				limit = {
					has_blocker = yes
				}
				every_tile = {
					limit = {
						has_blocker = yes
					}
					if = {
						limit = {
							has_blocker = "tb_mountain_range"
							exists = owner
							owner = {
								energy > 100
								minerals > 100
								has_technology = "tech_tb_mountain_range"
							}
						}
						owner = {
							add_energy = -100
							add_minerals = -100
						}
						remove_blocker = yes
					}
					if = {
						limit = {
							has_blocker = "tb_active_volcano"
							exists = owner
							owner = {
								energy > 100
								minerals > 100
								has_technology = "tech_tb_volcano"
							}
						}
						owner = {
							add_energy = -100
							add_minerals = -100
						}
						remove_blocker = yes
					}
					if = {
						limit = {
							has_blocker = "tb_dangerous_wildlife"
							exists = owner
							owner = {
								energy > 100
								minerals > 100
								has_technology = "tech_tb_dangerous_wildlife"
							}
						}
						owner = {
							add_energy = -100
							add_minerals = -100
						}
						remove_blocker = yes
					}
					if = {
						limit = {
							has_blocker = "tb_dense_jungle"
							exists = owner
							owner = {
								energy > 100
								minerals > 100
								has_technology = "tech_tb_dense_jungle"
							}
						}
						owner = {
							add_energy = -100
							add_minerals = -100
						}
						remove_blocker = yes
					}
					if = {
						limit = {
							has_blocker = "tb_quicksand_basin"
							exists = owner
							owner = {
								energy > 100
								minerals > 100
								has_technology = "tech_tb_quicksand_basin"
							}
						}
						owner = {
							add_energy = -100
							add_minerals = -100
						}
						remove_blocker = yes
					}
					if = {
						limit = {
							has_blocker = "tb_noxious_swamp"
							exists = owner
							owner = {
								energy > 100
								minerals > 100
								has_technology = "tech_tb_noxious_swamp"
							}
						}
						owner = {
							add_energy = -100
							add_minerals = -100
						}
						remove_blocker = yes
					}
					if = {
						limit = {
							has_blocker = "tb_massive_glacier"
							exists = owner
							owner = {
								energy > 100
								minerals > 100
								has_technology = "tech_tb_massive_glacier"
							}
						}
						owner = {
							add_energy = -100
							add_minerals = -100
						}
						remove_blocker = yes
					}
					if = {
						limit = {
							has_blocker = "tb_toxic_kelp"
							exists = owner
							owner = {
								energy > 100
								minerals > 100
								has_technology = "tech_tb_toxic_kelp"
							}
						}
						owner = {
							add_energy = -100
							add_minerals = -100
						}
						remove_blocker = yes
					}
					if = {
						limit = {
							has_blocker = "tb_deep_sinkhole"
							exists = owner
							owner = {
								energy > 100
								minerals > 100
								has_technology = "tech_tb_deep_sinkhole"
							}
						}
						owner = {
							add_energy = -100
							add_minerals = -100
						}
						remove_blocker = yes
					}
					if = {
						limit = {
							has_blocker = "tb_bomb_crater"
							exists = owner
							owner = {
								energy > 125
								minerals > 125
							}
						}
						owner = {
							add_energy = -125
							add_minerals = -125
						}
						remove_blocker = yes
					}
					if = {
						limit = {
							has_blocker = "tb_bombarded_land"
							exists = owner
							owner = {
								energy > 75
								minerals > 75
							}
						}
						owner = {
							add_energy = -75
							add_minerals = -75
						}
						remove_blocker = yes
					}
					if = {
						limit = {
							has_blocker = "tb_decrepit_dwellings"
							exists = owner
							owner = {
								energy > 40
								minerals > 40
							}
						}
						owner = {
							add_energy = -40
							add_minerals = -40
						}
						remove_blocker = yes
					}
					if = {
						limit = {
							has_blocker = "tb_failing_infrastructure"
							exists = owner
							owner = {
								energy > 60
								minerals > 60
							}
						}
						owner = {
							add_energy = -60
							add_minerals = -60
						}
						remove_blocker = yes
					}
				}
			}
		}
		
		
		## energy hub
		
		if = {
			limit = {
				has_country_flag = auto_build_11
				or = {
					not = { has_country_flag = auto_build_cost }
					and = {
						has_country_flag = auto_build_cost_5000
						minerals > 5000
					}
					and = {
						has_country_flag = auto_build_cost_2500
						minerals > 2500
					}
					and = {
						has_country_flag = auto_build_cost_1000
						minerals > 1000
					}
					and = {
						has_country_flag = auto_build_cost_500
						minerals > 500
					}
				}
			}
			every_owned_planet = {
				limit = {
					free_from_autobuild = no
					or = {
						has_any_power_plant = yes
						free_building_tiles > 0
					}
					nor = {
						has_building = "building_power_hub_1"
						has_building = "building_power_hub_2"
					}
					or = {
						has_building = "building_capital_1"
						has_building = "building_capital_2"
						has_building = "building_capital_3"
					}
				}
				event_target:autobuild_country = {
					set_variable = {
						which = auto_build_power_plant_planet
						value = 0
					}
				}
				every_tile = {
					limit = { has_any_power_plant = yes }
					event_target:autobuild_country = {
						change_variable = {
							which = auto_build_power_plant_planet
							value = 1
						}
					}
				}
				if = {
					limit = {
						event_target:autobuild_country = {
							check_variable = {
								which = auto_build_power_plant_planet
								value > 9
							}
						}
					}
					random_tile = {
						limit = {
							or = {
								has_building = no
								has_any_power_plant = yes
							}
							has_blocker = no
							or = {
								tile_has_energy_more_than_others = yes
								tile_has_any_res = no
							}
						}
						add_building_construction = "building_power_hub_1"
					}
				}
			}
		}
		
		# minerals complex
		
		if = {
			limit = {
				has_country_flag = auto_build_12
				or = {
					not = { has_country_flag = auto_build_cost }
					and = {
						has_country_flag = auto_build_cost_5000
						minerals > 5000
					}
					and = {
						has_country_flag = auto_build_cost_2500
						minerals > 2500
					}
					and = {
						has_country_flag = auto_build_cost_1000
						minerals > 1000
					}
					and = {
						has_country_flag = auto_build_cost_500
						minerals > 500
					}
				}
			}
			every_owned_planet = {
				limit = {
					free_from_autobuild = no
					or = {
						and = {
							has_any_mines = yes
							not = { has_building = "building_slave_processing" }
						}
						free_building_tiles > 0
					}
					nor = {
						has_building = "building_mineral_processing_plant_1"
						has_building = "building_mineral_processing_plant_2"
					}
					or = {
						has_building = "building_capital_1"
						has_building = "building_capital_2"
						has_building = "building_capital_3"
					}
				}
				event_target:autobuild_country = {
					set_variable = {
						which = auto_build_mines_planet
						value = 0
					}
				}
				every_tile = {
					limit = {
						has_any_mines = yes
						not = { has_building = "building_slave_processing" }
					}
					event_target:autobuild_country = {
						change_variable = {
							which = auto_build_mines_planet
							value = 1
						}
					}
				}
				if = {
					limit = {
						event_target:autobuild_country = {
							check_variable = {
								which = auto_build_power_plant_planet
								value > 9
							}
						}
					}
					random_tile = {
						limit = {
							or = {
								has_building = no
								and = {
									has_any_mines = yes
									not = { has_building = "building_slave_processing" }
								}
							}
							has_blocker = no
							or = {
								tile_has_minerals_more_than_others = yes
								tile_has_any_res = no
							}
						}
						add_building_construction = "building_mineral_processing_plant_1"
					}
				}
			}
		}
		
		## planet edicts:

		if = {
			limit = {
				or = {
					not = { has_country_flag = auto_build_cost }
					and = {
						has_country_flag = auto_build_cost_5000
						minerals > 5000
					}
					and = {
						has_country_flag = auto_build_cost_2500
						minerals > 2500
					}
					and = {
						has_country_flag = auto_build_cost_1000
						minerals > 1000
					}
					and = {
						has_country_flag = auto_build_cost_500
						minerals > 500
					}
				}
			}
			every_owned_planet = {
				limit = {
					or = {
						has_modifier = "planet_forge_auto_build"
						has_modifier = "planet_power_plant_auto_build"
						has_modifier = "planet_labs_auto_build"
						has_modifier = "planet_farms_auto_build"
					}
				}
				if = {														##	lets build farm
					limit = {
						or = {
							has_building = "building_capital_1"
							has_building = "building_capital_2"
							has_building = "building_capital_3"
						}
						not = { has_modifier = "planet_farms_auto_build" }
					}
					event_target:autobuild_country = {
						set_variable = {
							which = autobuild_farm_planet
							value = 0
						}
					}
					every_tile = {
						limit = { has_any_farm = yes }
						event_target:autobuild_country = {
							change_variable = {
								which = autobuild_farm_planet
								value = 1
							}
						}
					}
					every_tile = {
						limit = {
							tile_has_food_more_than_others = yes
							
							has_blocker = no
							has_building = no
							event_target:autobuild_country = {
								check_variable = {
									which = autobuild_farm_planet
									value < autobuild_farm_global
								}
							}
						}
						event_target:autobuild_country = {
							change_variable = {
								which = autobuild_farm_planet
								value = 1
							}
						}
						if = {
							limit = {
								or = {
									exists = pop
									planet = {
										has_building_construction = no
										has_any_farm = no
									}
								}
							}
							add_building_construction = "building_hydroponics_farm_1"
						}
					}
					else = {
						if = {
							limit = {
								has_building = "building_colony_shelter"
								not = { has_modifier = "planet_farms_auto_build" }
							}
							event_target:autobuild_country = {
								set_variable = {
									which = autobuild_farm_planet
									value = 0
								}
							}
							every_tile = {
								limit = { has_any_farm = yes }
								event_target:autobuild_country = {
									change_variable = {
										which = autobuild_farm_planet
										value = 1
									}
								}
							}
							every_tile = {
								limit = {
									tile_has_food_more_than_others = yes
									has_blocker = no
									has_building = no
									event_target:autobuild_country = {
										check_variable = {
											which = autobuild_farm_planet
											value < autobuild_farm_global
										}
									}
								}
								event_target:autobuild_country = {
									change_variable = {
										which = autobuild_farm_planet
										value = 1
									}
								}
								if = {
									limit = {
										or = {
											exists = pop
											planet = {
												has_building_construction = no
												has_any_farm = no
											}
										}
									}
									add_building_construction = "building_basic_farm"
								}
							}
						}
					}
				}
				if = {														## farm planet
					limit = {
						has_modifier = "planet_farms_auto_build"
						or = {
							free_building_tiles > 0
							has_any_power_plant = yes
							has_any_science_lab = yes
							has_any_mines = yes
						}
					}
					if = {
						limit = {
							or = {
								has_building = "building_capital_1"
								has_building = "building_capital_2"
								has_building = "building_capital_3"
							}
						}
						every_tile = {
							limit = {
								or = {
									has_building = no
									has_any_power_plant = yes
									has_any_science_lab = yes
									has_any_mines = yes
								}
								exists = pop
								pop = {	is_being_purged = no }
							}
							add_building_construction = "building_hydroponics_farm_1"
						}
						else = {
							if = {
								limit = { has_building = "building_colony_shelter" }
								every_tile = {
									limit = {
										or = {
											has_building = no
											has_any_power_plant = yes
											has_any_science_lab = yes
											has_any_mines = yes
										}
										exists = pop
										pop = {	is_being_purged = no }
									}
									add_building_construction = "building_basic_farm"
								}
							}
						}
					}
				}
				if = {
					limit = {
						has_modifier = "planet_forge_auto_build"			## planet of mines
						exists = owner
						or = {
							free_building_tiles > 0
							has_any_power_plant = yes
							has_any_science_lab = yes
							and = {
								owner = {
									has_technology = "tech_neural_implants"
								}
								not = {	has_building = "building_slave_processing" }
								count_pops = {
									limit = { is_enslaved = yes }
									count > 3								## at least 4 slaves
								}
							}
							and = {
								owner = {
									has_technology = "tech_mineral_processing_1"
								}
								nor = {
									has_building = "building_mineral_processing_plant_1"
									has_building = "building_mineral_processing_plant_2"
								}
							}
						}
					}
					if = {
						limit = {
							or = {
								has_building = "building_capital_1"
								has_building = "building_capital_2"
								has_building = "building_capital_3"
							}
						}
						every_tile = {
							limit = {
								or = {
									has_building = no
									has_any_power_plant = yes
									has_any_science_lab = yes
									has_any_mines = yes
								}
								nor = {
									has_building = "building_mineral_processing_plant_1"
									has_building = "building_mineral_processing_plant_2"
								}
							}
							if = {
								limit = {
									tile_has_any_minerals = no
									exists = owner
									owner = { has_technology = "tech_neural_implants" }
									planet = {
										not = {	has_building = "building_slave_processing" }
										count_pops = {
											limit = { is_enslaved = yes }
											count > 3								## at least 4 slaves
										}
									}
								}
								add_building_construction = "building_slave_processing"						
								else = {
									if = {
										limit = {
											or = {
												has_building = no
												has_any_power_plant = yes
												has_any_science_lab = yes
												has_any_mines = yes
											}
											planet = {
												nor = {
													has_building = "building_mineral_processing_plant_1"
													has_building = "building_mineral_processing_plant_2"
												}
											}
											exists = owner
											owner = { has_technology = "tech_mineral_processing_1" }
										}
										add_building_construction = "building_mineral_processing_plant_1"
										else = {
											if = {
												limit = {
													or = {
														has_building = no
														has_any_power_plant = yes
														has_any_science_lab = yes
													}
													exists = pop
													pop = {	is_being_purged = no }
												}
											add_building_construction = "building_mining_network_1"
											}
										}
									}
								}
							}
						}
						else = {
							if = {
								limit = { has_building = "building_colony_shelter" }
								every_tile = {
									limit = {
										or = {
											has_building = no
											has_any_power_plant = yes
											has_any_science_lab = yes
											has_any_mines = yes
										}
									}
									if = {
										limit = {
											tile_has_any_minerals = no
											or = {
												has_building = no
												has_any_power_plant = yes
												has_any_science_lab = yes
												has_any_mines = yes
											}
											nor = {
												has_building = "building_mineral_processing_plant_1"
												has_building = "building_mineral_processing_plant_2"
											}
											exists = owner
											owner = { has_technology = "tech_neural_implants" }
											planet = {
												not = {	has_building = "building_slave_processing" }
												count_pops = {
													limit = { is_enslaved = yes }
													count > 3								## at least 4 slaves
												}
											}
										}
										add_building_construction = "building_slave_processing"
										else = {
											if = {
												limit = {
													or = {
														has_building = no
														has_any_power_plant = yes
														has_any_science_lab = yes
													}
													exists = pop
													pop = {	is_being_purged = no }
												}
												add_building_construction = "building_basic_mine"
											}
										}
									}
								}
							}
						}
					}
				}
				if = {
					limit = {
						has_modifier = "planet_power_plant_auto_build"		## planet of power plants
						exists = owner
						or = {
							free_building_tiles > 0
							has_any_mines = yes
							has_any_science_lab = yes
							and = {
								owner = {
									has_technology = "tech_power_hub_1"
								}
								nor = {
									has_building = "building_power_hub_1"
									has_building = "building_power_hub_2"
								}
							}
						}
					}
					if = {
						limit = {
							or = {
								has_building = "building_capital_1"
								has_building = "building_capital_2"
								has_building = "building_capital_3"
							}
						}
						every_tile = {
							limit = {
								or = {
									has_building = no
									has_any_mines = yes
									has_any_science_lab = yes
									has_any_power_plant = yes
								}
							}
							if = {
								limit = {
									exists = owner
									owner = { has_technology = "tech_power_hub_1" }
									planet = {
										nor = {
											has_building = "building_power_hub_1"
											has_building = "building_power_hub_2"
										}
									}
								}
								add_building_construction = "building_power_hub_1"
								else = {
									if = {
										limit = {
											or = {
												has_building = no
												has_any_mines = yes
												has_any_science_lab = yes
											}
											exists = pop
											pop = {
												is_being_purged = no
												is_slavebot = no
											}
										}
										add_building_construction = "building_power_plant_1"
									}
								} 
							} 
						}
						else = {
							if = {
								limit = { has_building = "building_colony_shelter" }
								every_tile = {
									limit = {
										exists = pop
										pop = {
											is_being_purged = no
											is_slavebot = no
										}
										or = {
											has_building = no
											has_any_mines = yes
											has_any_science_lab = yes
										}
									}
									add_building_construction = "building_basic_power_plant"
								}
							}
						}
					} 
				}
				if = {
					limit = {
						has_modifier = "planet_labs_auto_build"				## planet of labs
						or = {
							free_building_tiles > 0
							has_any_mines = yes
							has_any_power_plant = yes
						}
						or = {
							has_building = "building_capital_1"
							has_building = "building_capital_2"
							has_building = "building_capital_3"
							has_building = "building_colony_shelter"
						}
					}
					every_tile = {
						limit = {
							exists = pop
							pop = {
								is_being_purged = no
								is_slavebot = no
							}
							or = {
								has_building = no
								has_any_mines = yes
								has_any_power_plant = yes
							}
						}
						add_building_construction = "building_basic_science_lab_1"
					}
				}
			}
		}

		## auto update buildings ##

		if = {
			limit = {
				has_country_flag = auto_build_1
				or = {
					not = { has_country_flag = auto_build_cost }
					and = {
						has_country_flag = auto_build_cost_5000
						minerals > 5000
					}
					and = {
						has_country_flag = auto_build_cost_2500
						minerals > 2500
					}
					and = {
						has_country_flag = auto_build_cost_1000
						minerals > 1000
					}
					and = {
						has_country_flag = auto_build_cost_500
						minerals > 500
					}
				}
			}
			every_owned_planet = {
				if = {
					limit = {
						not = { has_modifier = "free_from_auto_update" }
						has_building_construction = no
						or = {
							has_building = "building_capital_1"
							has_building = "building_capital_2"
							has_building = "building_capital_3"
						}
					}
					every_tile = {
						limit = {
							exists = pop
							pop = { is_being_purged = no }
							nor = {
								has_building = "building_capital_3"
								has_building = "building_power_plant_5"
								has_building = "betharian_power_plant_4"
								has_building = "building_power_hub_2"
								has_building = "building_hydroponics_farm_5"
								has_building = "building_mineral_silo_3"
								has_building = "building_mining_network_5"
								has_building = "building_mineral_processing_plant_2"
								has_building = "building_engineering_facility_4"
								has_building = "building_physics_lab_4"
								has_building = "building_biolab_4"
								and = {
									or = {
										has_building = "building_power_plant_4"
										has_building = "building_hydroponics_farm_4"
										has_building = "building_mining_network_4"
										has_building = "building_engineering_facility_3"
										has_building = "building_physics_lab_3"
										has_building = "building_biolab_3"
									}
									planet = {
										not = { has_building = "building_capital_3" }
									}
								}
							}
						}
						switch = {
							trigger = has_building

							"building_basic_power_plant" = { add_building_construction = "building_power_plant_1" }
							"building_power_plant_1" = { add_building_construction = "building_power_plant_2" }
							"building_power_plant_2" = { add_building_construction = "building_power_plant_3" }
							"building_power_plant_3" = { add_building_construction = "building_power_plant_4" }
							"building_power_plant_4" = { add_building_construction = "building_power_plant_5" }
							"building_basic_farm" = { add_building_construction = "building_hydroponics_farm_1" }
							"building_hydroponics_farm_1" = { add_building_construction = "building_hydroponics_farm_2" }
							"building_hydroponics_farm_2" = { add_building_construction = "building_hydroponics_farm_3" }
							"building_hydroponics_farm_3" = { add_building_construction = "building_hydroponics_farm_4" }
							"building_hydroponics_farm_4" = { add_building_construction = "building_hydroponics_farm_5" }
							"building_basic_mine" = { add_building_construction = "building_mining_network_1" }
							"building_mining_network_1" = { add_building_construction = "building_mining_network_2" }
							"building_mining_network_2" = { add_building_construction = "building_mining_network_3" }
							"building_mining_network_3" = { add_building_construction = "building_mining_network_4" }
							"building_mining_network_4" = { add_building_construction = "building_mining_network_5" }
							"building_engineering_facility_1" = { add_building_construction = "building_engineering_facility_2" }
							"building_engineering_facility_2" = { add_building_construction = "building_engineering_facility_3" }
							"building_engineering_facility_3" = { add_building_construction = "building_engineering_facility_4" }
							"building_physics_lab_1" = { add_building_construction = "building_physics_lab_2" }
							"building_physics_lab_2" = { add_building_construction = "building_physics_lab_3" }
							"building_physics_lab_3" = { add_building_construction = "building_physics_lab_4" }
							"building_biolab_1" = { add_building_construction = "building_biolab_2" }
							"building_biolab_2" = { add_building_construction = "building_biolab_3" }
							"building_biolab_3" = { add_building_construction = "building_biolab_4" }
							"betharian_power_plant_1" = { add_building_construction = "betharian_power_plant_2" }
							"betharian_power_plant_2" = { add_building_construction = "betharian_power_plant_3" }
							"betharian_power_plant_3" = { add_building_construction = "betharian_power_plant_4" }
							"building_mineral_silo_1" = { add_building_construction = "building_mineral_silo_2" }
							"building_mineral_silo_2" = { add_building_construction = "building_mineral_silo_3" }
							"building_primitive_factory" = { add_building_construction = "building_mining_network_1" }
							"building_primitive_farm" = { add_building_construction = "building_hydroponics_farm_1" }
							"building_power_hub_1" = { add_building_construction = "building_power_hub_2" }
							"building_mineral_processing_plant_1" = { add_building_construction = "building_mineral_processing_plant_2" }
							"building_clinic" = { add_building_construction = "building_hospital" }
							## alphamod
							"building_radio_telescope_array" = { add_building_construction = "building_radio_telescope_array_2" }
							"building_radio_telescope_array_2" = { add_building_construction = "building_radio_telescope_array_3" }
							"building_radio_telescope_array_3" = { add_building_construction = "building_radio_telescope_array_4" }
							"building_rocket_launchsite" = { add_building_construction = "building_shuttle_port" }
							"building_shuttle_port" = { add_building_construction = "building_advanced_shuttleport" }
							"building_lightmechbay" = { add_building_construction = "building_mediummechbay" }
							"building_mediummechbay" = { add_building_construction = "building_heavymechbay" }
							"building_hydro_plant" = { add_building_construction = "building_hydro_plant_2" }
							"building_basic_farm_adv" = { add_building_construction = "building_hydroponics_farm_1_adv" }
							"building_hydroponics_farm_1_adv" = { add_building_construction = "building_hydroponics_farm_2_adv" }
							"building_hydroponics_farm_2_adv" = { add_building_construction = "building_hydroponics_farm_3_adv" }
							"building_hydroponics_farm_3_adv" = { add_building_construction = "building_hydroponics_farm_4_adv" }
							"building_traditional_farm" = { add_building_construction = "building_preservation" }
							"building_frontier_town" = { add_building_construction = "building_frontier_city" }
							"building_fuel_sourcer" = { add_building_construction = "building_fuel_sourcer_2" }
							"building_fuel_sourcer_2" = { add_building_construction = "building_fuel_sourcer_3" }
							"building_fuel_refinery" = { add_building_construction = "building_fuel_refinery_2" }
							"building_alpha_fuel_converter" = { add_building_construction = "building_alpha_fuel_converter_2" }
							"building_alpha_fuel_converter_2" = { add_building_construction = "building_alpha_fuel_converter_3" }
							"building_alpha_fuel_converter_3" = { add_building_construction = "building_alpha_fuel_converter_4" }
							"building_traditional_plantation" = { add_building_construction = "building_preservation" }
							"building_moisture_farm" = { add_building_construction = "building_moisture_farm_2" }
							"building_moisture_farm_2" = { add_building_construction = "building_moisture_farm_3" }
							"building_sand_sifter" = { add_building_construction = "building_sand_sifter_2" }
							"building_greenhousing" = { add_building_construction = "building_vertical_farms" }
							"building_water_excavator" = { add_building_construction = "building_water_excavator_2" }
							"building_reservoir" = { add_building_construction = "building_reservoir_2" }
							"building_reservoir_2" = { add_building_construction = "building_reservoir_3" }
							"building_ice_rig" = { add_building_construction = "building_ice_rig_2" }
							"building_water_excavator" = { add_building_construction = "building_water_excavator_2" }
							
						}
					}
				}
			}
		}

		## auto update influence cost ##
		if = {
			limit = {
				has_country_flag = auto_build_2
				or = {
					not = { has_country_flag = auto_build_cost }
					and = {
						or = {
							and = {
								has_country_flag = auto_build_cost_5000
								minerals > 5000
							}
							and = {
								has_country_flag = auto_build_cost_2500
								minerals > 2500
							}
							and = {
								has_country_flag = auto_build_cost_1000
								minerals > 1000
							}
							and = {
								has_country_flag = auto_build_cost_500
								minerals > 500
							}
						}
						or = {
							and = {
								has_country_flag = auto_build_cost_inf_500
								influence > 500
							}
							and = {
								has_country_flag = auto_build_cost_inf_250
								influence > 250
							}
							and = {
								has_country_flag = auto_build_cost_inf_100
								influence > 100
							}
						}
					}
				}
			}
			every_owned_planet = {
				limit = {
					not = { has_modifier = "free_from_auto_update" }
					has_building_construction = no
					or = {
						has_building = "building_colony_shelter"
						has_building = "building_capital_1"
						and = {
							has_building = "building_capital_2"
							is_capital = yes
						}
						has_building = "building_power_hub_1"
						has_building = "building_mineral_processing_plant_1"
					}
				}
				every_tile = {
					limit = {
						exists = pop
						pop = { is_being_purged = no }
					}
					switch = {
						trigger = has_building

						"building_colony_shelter" = { add_building_construction = "building_capital_1" }
						"building_capital_1" = { add_building_construction = "building_capital_2" }
						"building_capital_2" = { add_building_construction = "building_capital_3" }
						## alphamod
						"building_academy" = { add_building_construction = "building_academy_2" }
						"building_intelligence_directorate" = { add_building_construction = "building_intelligence_directorate_2" }
						"building_surveillance_center" = { add_building_construction = "building_surveillance_center_2" }
						"building_security_center" = { add_building_construction = "building_security_center_2" }
						"building_open_embassy" = { add_building_construction = "building_open_embassy_2" }
						"building_xeno_diplomacy_corp" = { add_building_construction = "building_peace_corps" }
						"building_tradestation" = { add_building_construction = "building_trade_company" }
						
					}
				}
			}
		}

		## labs by good planet ##

		if = {
			limit = {
				has_country_flag = auto_build_5
				or = {
					not = { has_country_flag = auto_build_cost }
					and = {
						has_country_flag = auto_build_cost_5000
						minerals > 5000
					}
					and = {
						has_country_flag = auto_build_cost_2500
						minerals > 2500
					}
					and = {
						has_country_flag = auto_build_cost_1000
						minerals > 1000
					}
					and = {
						has_country_flag = auto_build_cost_500
						minerals > 500
					}
				}
			}
			every_owned_planet = {
				limit = {
					not = { has_modifier = "free_from_auto_update" }
					has_building_construction = no
					or = {
						has_building = "building_capital_1"
						has_building = "building_capital_2"
						has_building = "building_capital_3"
					}
					has_building = "building_basic_science_lab_1"
				}
				if = {
					limit = {
						or = {
							has_planet_modifier = "pm_titanic_life"
							has_planet_modifier = "pm_atmospheric_hallucinogen"
							has_modifier = "atmospheric_hallucinogen_good"
							has_modifier = "subterranean_civilization"
							has_planet_modifier = "pm_dangerous_wildlife"
							has_modifier = "society_animal_life"
							## alphamod
							has_planet_modifier = "pm_micro_organisms"
							has_planet_modifier = "pm_subterranean_lifeforms"
						}
					}
					every_tile = {
						limit = {
							has_building = "building_basic_science_lab_1"
							exists = pop
							pop = { is_being_purged = no }
						}
						add_building_construction = "building_biolab_1"
					}
					else = {
						if = {
							limit = {
								or = {
									has_planet_modifier = "pm_strong_magnetic_field"
									has_planet_modifier = "pm_wild_storms"
									## alphamod
									has_planet_modifier = "pm_physicists_paradise"
								}
							}
							every_tile = {
								limit = {
									has_building = "building_basic_science_lab_1"
									exists = pop
									pop = { is_being_purged = no }
								}
								add_building_construction = "building_physics_lab_1"
							}
							else = {
								if = {
									limit = {
										has_planet_modifier = "pm_unstable_tectonics"
										## alphamod
										has_planet_modifier = "pm_engineers_paradise"
										has_planet_modifier = "pm_underground_caverns"
										has_planet_modifier = "pm_crystalline_formations"
										has_planet_modifier = "pm_geothermal_activity"
										has_planet_modifier = "pm_volcanic_ash_clouds"
									}
									every_tile = {
										limit = {
											has_building = "building_basic_science_lab_1"
											exists = pop
											pop = { is_being_purged = no }
										}
									add_building_construction = "building_engineering_facility_1"
									}
								}
							}
						}
					}
				}
			}
		}

		## to do labs by emp priority ##

		## labs by semi random ##

		if = {
			limit = {
				has_country_flag = auto_build_6
				or = {
					not = { has_country_flag = auto_build_cost }
					and = {
						has_country_flag = auto_build_cost_5000
						minerals > 5000
					}
					and = {
						has_country_flag = auto_build_cost_2500
						minerals > 2500
					}
					and = {
						has_country_flag = auto_build_cost_1000
						minerals > 1000
					}
					and = {
						has_country_flag = auto_build_cost_500
						minerals > 500
					}
				}
			}
			every_owned_planet = {
				limit = {
					not = { has_modifier = "free_from_auto_update" }
					has_building_construction = no
					or = {
						has_building = "building_capital_1"
						has_building = "building_capital_2"
						has_building = "building_capital_3"
					}
					has_building = "building_basic_science_lab_1"
				}
				every_tile = {
					limit = {
						has_building = "building_basic_science_lab_1"
						exists = pop
						pop = { is_being_purged = no }
					}
					if = {
						limit = {
							pop = { has_trait = trait_natural_sociologists }
						}
						add_building_construction = "building_biolab_1"
						else = {
							if = {
								limit = {
									pop = { has_trait = trait_natural_physicists }
								}
								add_building_construction = "building_physics_lab_1"
								else = {
									if = {
										limit = {
											pop = { has_trait = trait_natural_engineers }
										}
										add_building_construction = "building_engineering_facility_1"
										else = {
											if = {
												limit = {
													has_resource = {
														type = physics_research
														amount > 0
													}
												}
												add_building_construction = "building_physics_lab_1"
												else = {
													if = {
														limit = {
															has_resource = {
																type = society_research
																amount > 0
															}
														}
														add_building_construction = "building_biolab_1"
														else = {
															if = {
																limit = {
																	has_resource = {
																		type = engineering_research
																		amount > 0
																	}
																}
																add_building_construction = "building_engineering_facility_1"
																else = {
																	random_list = {
																		33 = { add_building_construction = "building_physics_lab_1" }
																		33 = { add_building_construction = "building_biolab_1" }
																		33 = { add_building_construction = "building_engineering_facility_1" }
																	}
																}
															}
														}
													}
												}
											}
										}
									}
								}
							}
						}
					}
				}
			}
		}
	}
}

## local autobuild for planets for on_actions
## local auto enslave
planet_event = {
	id = autobuild.101
	title = OK
	desc = OK
	hide_window = yes
	is_triggered_only = yes

 	trigger = {
		exists = owner
		owner = {
			is_ai = no
			or = {
				has_country_flag = auto_build_4
				has_country_flag = auto_build_4_1
			}
		}
	}

	immediate = {
		if = {
			limit = {
				owner = { has_country_flag = auto_build_4 }
				not = { has_modifier = "free_from_auto_enslave" }
			}
			every_tile = {
				if = {
					limit = {
						exists = pop
						pop = { is_robot = no }
						or = {
							has_any_mines = yes
							has_any_farm = yes									
							has_building = "building_colony_shelter"
							has_building = "building_capital_1"
							has_building = "building_capital_2"
							has_building = "building_capital_3"
							has_building = "building_clinic"
							has_building = "building_ancient_factory"
					#		has_building = "building_agri_processing_complex"
							has_building = "building_great_pyramid"
							and = {
								exists = owner
								owner = { has_country_flag = auto_build_4_1 }
								pop = {
									is_being_purged = no
									not = { is_same_species = owner.species }
								}
							}
						}
					}
					if = {
						limit = {
							exists = owner
							owner = {
								or = {
									has_policy_flag = slavery_allowed_regulated_xenos_only
									has_policy_flag = slavery_allowed_xenos_only
								}
							}
							pop = {
								is_being_purged = no
								not = { is_same_species = owner.species }
								is_enslaved = no
							}
						}
						pop = { enslave_pop = yes }
					}
					if = {
						limit = {
							exists = owner
							owner = {
								or = {
									has_policy_flag = slavery_allowed_regulated
									has_policy_flag = slavery_allowed_all
								}
							}
							pop = {
								is_being_purged = no
								is_enslaved = no
							}
						}
						pop = { enslave_pop = yes }
					}
					if = {
						limit = {
							exists = owner
							owner = { has_policy_flag = ai_servitude }
							pop = {
								is_being_purged = no
								is_enslaved = no
								is_species = "ROBOT_POP_SPECIES_3"
							}
						}
						pop = { enslave_pop = yes }
					}
					else = {
						if = {
							limit = {
								exists = pop
								pop = {
									is_being_purged = no
									is_enslaved = yes
								}
							}
							pop = { enslave_pop = no }
						}
					}
				}
			}
		}
	}
}

## local auto build
planet_event = {
	id = autobuild.102
	title = OK
	desc = OK
	hide_window = yes
	is_triggered_only = yes
	
	trigger = {
		exists = owner
		owner = {			is_ai = no			or = {				has_country_flag = auto_build_3				has_country_flag = auto_build_4_2				has_country_flag = auto_build_7_1				has_country_flag = auto_build_7_2				has_country_flag = auto_build_7_3				has_country_flag = auto_build_7_4				has_country_flag = auto_build_7_6				has_country_flag = auto_build_7_7				has_country_flag = auto_build_8				has_country_flag = auto_build_9			}			or = {				not = { has_country_flag = auto_build_cost }				and = {					has_country_flag = auto_build_cost_5000					minerals > 5000				}				and = {					has_country_flag = auto_build_cost_2500					minerals > 2500				}				and = {					has_country_flag = auto_build_cost_1000					minerals > 1000				}				and = {					has_country_flag = auto_build_cost_500					minerals > 500				}			}		}
		free_from_autobuild = no
		free_building_tiles > 0
	}
	
	immediate = {
	
		owner = { save_event_target_as = autobuild_country }

		## replace power plants and labs if slave ##

		if = {
			limit = {
				owner = {
					has_country_flag = auto_build_4_2
				}
			}
			if = {
				limit = {
					or = {
						has_building = "building_capital_1"
						has_building = "building_capital_2"
						has_building = "building_capital_3"
					}
				}
				every_tile = {					limit = {						exists = pop						pop = {							is_being_purged = no							is_enslaved = yes						}						or = {							has_any_power_plant = yes							has_any_science_lab = yes						}					}					add_building_construction = "building_mining_network_1"				}				else = {					if = {						limit = {							has_building = "building_colony_shelter"						}						every_tile = {							limit = {								exists = pop								pop = {									is_being_purged = no									is_enslaved = yes								}								or = {									has_any_power_plant = yes									has_any_science_lab = yes								}							}							add_building_construction = "building_basic_mine"						}					}
				}			}		}

		## auto build in ept tiles ##

		if = {
			limit = {
				owner = {
					or = {
						has_country_flag = auto_build_7_1
						has_country_flag = auto_build_7_2
						has_country_flag = auto_build_7_3
						has_country_flag = auto_build_7_4
			#			has_country_flag = auto_build_7_5
						has_country_flag = auto_build_7_6
						has_country_flag = auto_build_7_7
					}
				}
			}
			if = {				limit = {					or = {						has_building = "building_capital_1"						has_building = "building_capital_2"						has_building = "building_capital_3"					}				}				every_tile = {					limit = {						has_building = no						exists = pop						pop = {							is_being_purged = no							is_slavebot = yes						}						tile_has_any_res = no					}					add_building_construction = "building_mining_network_1"				}				else = {					if = {						limit = {							has_building = "building_colony_shelter"						}						every_tile = {							limit = {								has_building = no								exists = pop								pop = {									is_being_purged = no									is_slavebot = yes								}								tile_has_any_res = no							}							add_building_construction = "building_basic_mine"						}					}				}			}
			if = {
				limit = {
					owner = { has_country_flag = auto_build_7_1 }
				}				if = {					limit = {						or = {							has_building = "building_capital_1"							has_building = "building_capital_2"							has_building = "building_capital_3"						}					}					every_tile = {						limit = {							has_building = no							exists = pop							pop = { is_being_purged = no }							tile_has_any_res = no						}						add_building_construction = "building_power_plant_1"					}					else = {						if = {							limit = {								has_building = "building_colony_shelter"							}							every_tile = {								limit = {									has_building = no									exists = pop									pop = { is_being_purged = no }									tile_has_any_res = no								}								add_building_construction = "building_basic_power_plant"							}						}					}				}			}
			if = {
				limit = {
					owner = { has_country_flag = auto_build_7_2 }
				}				if = {					limit = {						or = {							has_building = "building_capital_1"							has_building = "building_capital_2"							has_building = "building_capital_3"						}					}					every_tile = {						limit = {							has_building = no							exists = pop							pop = { is_being_purged = no }							tile_has_any_res = no						}						add_building_construction = "building_mining_network_1"					}					else = {						if = {							limit = {								has_building = "building_colony_shelter"							}							every_tile = {								limit = {									has_building = no									exists = pop									pop = { is_being_purged = no }									tile_has_any_res = no								}								add_building_construction = "building_basic_mine"							}						}					}				}			}

			if = {
				limit = {
					owner = { has_country_flag = auto_build_7_3 }
				}
				every_tile = {
					limit = {
						has_building = no
						exists = pop
						pop = { is_being_purged = no }
						tile_has_any_res = no
					}
					add_building_construction = "building_basic_science_lab_1"
				}
			}
			if = {
				limit = {
					owner = { has_country_flag = auto_build_7_4 }
				}
				if = {					limit = {						or = {							has_building = "building_capital_1"							has_building = "building_capital_2"							has_building = "building_capital_3"						}					}					every_tile = {						limit = {							has_building = no							exists = pop							pop = { is_being_purged = no }							tile_has_any_res = no						}						random_list = {							80 = { add_building_construction = "building_basic_science_lab_1" }							20 = { add_building_construction = "building_power_plant_1" }						}					}					else = {						if = {							limit = {								has_building = "building_colony_shelter"							}							every_tile = {								limit = {									has_building = no									exists = pop									pop = { is_being_purged = no }									tile_has_any_res = no								}								random_list = {									80 = { add_building_construction = "building_basic_science_lab_1" }									20 = { add_building_construction = "building_basic_power_plant" }								}							}						}					}				}			}

			## to do build by emp prior ##

			if = {
				limit = {
					owner = { has_country_flag = auto_build_7_6 }
				}
				if = {					limit = {						or = {							has_building = "building_capital_1"							has_building = "building_capital_2"							has_building = "building_capital_3"						}					}					every_tile = {						limit = {							has_building = no							exists = pop							pop = { is_being_purged = no }							tile_has_any_res = no						}						random_list = {							33 = { add_building_construction = "building_basic_science_lab_1" }							33 = { add_building_construction = "building_power_plant_1" }							33 = { add_building_construction = "building_mining_network_1" }						}					}					else = {						if = {							limit = {								has_building = "building_colony_shelter"							}							every_tile = {								limit = {									has_building = no									exists = pop									pop = { is_being_purged = no }									tile_has_any_res = no								}								random_list = {									33 = { add_building_construction = "building_basic_science_lab_1" }									33 = { add_building_construction = "building_basic_power_plant" }									33 = { add_building_construction = "building_basic_mine" }								}							}						}					}				}			}

			if = {
				limit = {
					owner = { has_country_flag = auto_build_7_7 }
				}
				if = {					limit = {						or = {							has_building = "building_capital_1"							has_building = "building_capital_2"							has_building = "building_capital_3"						}					}					every_tile = {						limit = {							has_building = no							exists = pop							pop = { is_being_purged = no }							tile_has_any_res = no						}						random_list = {							50 = { add_building_construction = "building_basic_science_lab_1" }							50 = { add_building_construction = "building_power_plant_1" }						}					}					else = {						if = {							limit = {								has_building = "building_colony_shelter"							}							every_tile = {								limit = {									has_building = no									exists = pop									pop = { is_being_purged = no }									tile_has_any_res = no								}								random_list = {									50 = { add_building_construction = "building_basic_science_lab_1" }									50 = { add_building_construction = "building_basic_power_plant" }								}							}						}					}				}			}		}

		## auto build new buildings on good tiles ##

		if = {
			limit = {
				owner = {
					has_country_flag = auto_build_3
				}
			}
			if = {				limit = {					or = {						has_building = "building_capital_1"						has_building = "building_capital_2"						has_building = "building_capital_3"					}				}				event_target:autobuild_country = {					set_variable = {						which = autobuild_farm_planet						value = 0					}				}				every_tile = {					limit = { has_any_farm = yes }					event_target:autobuild_country = {						change_variable = {							which = autobuild_farm_planet							value = 1						}					}				}
				every_tile = {
					limit = {
						has_building = no
						exists = pop
						pop = {
							is_being_purged = no
							is_slavebot = no
						}
						tile_has_science_more_than_others = yes
					}
					add_building_construction = "building_basic_science_lab_1"
				}
				every_tile = {					limit = {						has_building = no						exists = pop						pop = {							is_being_purged = no							is_slavebot = no						}						tile_has_energy_more_than_others = yes					}					add_building_construction = "building_power_plant_1"				}				every_tile = {					limit = {						has_building = no						exists = pop						pop = { is_being_purged = no }						tile_has_minerals_more_than_others = yes					}					add_building_construction = "building_mining_network_1"				}				every_tile = {
					limit = {
						tile_has_food_more_than_others = yes
						has_blocker = no
						has_building = no
						event_target:autobuild_country = {
							check_variable = {
								which = autobuild_farm_planet
								value < autobuild_farm_global
							}
						}
					}
					event_target:autobuild_country = {
						change_variable = {
							which = autobuild_farm_planet
							value = 1
						}
					}
					if = {
						limit = {
							or = {
								exists = pop
								planet = {
									has_building_construction = no
									has_any_farm = no
								}
							}
						}
						add_building_construction = "building_hydroponics_farm_1"
					}
				}				else = {					if = {						limit = {							free_from_autobuild = no							free_building_tiles > 0							has_building = "building_colony_shelter"						}						event_target:autobuild_country = {							set_variable = {								which = autobuild_farm_planet								value = 0							}						}						every_tile = {							limit = { has_any_farm = yes }							event_target:autobuild_country = {								change_variable = {									which = autobuild_farm_planet									value = 1								}							}						}						every_tile = {
							limit = {
								tile_has_food_more_than_others = yes
								has_blocker = no
								has_building = no
								event_target:autobuild_country = {
									check_variable = {
										which = autobuild_farm_planet
										value < autobuild_farm_global
									}
								}
							}
							event_target:autobuild_country = {
								change_variable = {
									which = autobuild_farm_planet
									value = 1
								}
							}
							if = {
								limit = {
									or = {
										exists = pop
										planet = {
											has_building_construction = no
											has_any_farm = no
										}
									}
								}
								add_building_construction = "building_basic_farm"
							}
						}
						every_tile = {
							limit = {
								has_building = no
								exists = pop
								pop = {
									is_being_purged = no
									is_slavebot = no
								}
								tile_has_science_more_than_others = yes
							}
							add_building_construction = "building_basic_science_lab_1"
						}
						every_tile = {							limit = {								has_building = no								exists = pop								pop = {									is_being_purged = no									is_slavebot = no								}								tile_has_energy_more_than_others = yes							}							add_building_construction = "building_basic_power_plant"						}						every_tile = {							limit = {								has_building = no								exists = pop								pop = { is_being_purged = no }								tile_has_minerals_more_than_others = yes							}							add_building_construction = "building_basic_mine"						}					}				}			}		}
	}
}

## local auto build planet
planet_event = {
	id = autobuild.103
	title = OK
	desc = OK
	hide_window = yes
	is_triggered_only = yes

	trigger = {
		exists = owner
		owner = {
			is_ai = no
			or = {
				not = { has_country_flag = auto_build_cost }
				and = {
					has_country_flag = auto_build_cost_5000
					minerals > 5000
				}
				and = {
					has_country_flag = auto_build_cost_2500
					minerals > 2500
				}
				and = {
					has_country_flag = auto_build_cost_1000
					minerals > 1000
				}
				and = {
					has_country_flag = auto_build_cost_500
					minerals > 500
				}
			}
		}
		or = {
			has_modifier = "planet_forge_auto_build"
			has_modifier = "planet_power_plant_auto_build"
			has_modifier = "planet_labs_auto_build"
		}
		has_building_construction = no
	}

	immediate = {

		owner = { save_event_target_as = autobuild_country }

		## planet edicts:
		if = {														##	lets build farm
			limit = {
				or = {
					has_building = "building_capital_1"
					has_building = "building_capital_2"
					has_building = "building_capital_3"
				}
				free_building_tiles > 0
			}
			event_target:autobuild_country = {
				set_variable = {
					which = autobuild_farm_planet
					value = 0
				}
			}
			every_tile = {
				limit = { has_any_farm = yes }
				event_target:autobuild_country = {
					change_variable = {
						which = autobuild_farm_planet
						value = 1
					}
				}
			}
			every_tile = {
				limit = {
					tile_has_food_more_than_others = yes
					has_blocker = no
					has_building = no
					event_target:autobuild_country = {
						check_variable = {
							which = autobuild_farm_planet
							value < autobuild_farm_global
						}
					}
				}
				event_target:autobuild_country = {
					change_variable = {
						which = autobuild_farm_planet
						value = 1
					}
				}
				if = {
					limit = {
						or = {
							exists = pop
							planet = {
								has_any_farm = no
							}
						}
					}
					add_building_construction = "building_hydroponics_farm_1"
				}
			}
			else = {
				if = {
					limit = {
						has_building = "building_colony_shelter"
					}
					event_target:autobuild_country = {
						set_variable = {
							which = autobuild_farm_planet
							value = 0
						}
					}
					every_tile = {
						limit = {
							has_any_farm = yes
						}
						event_target:autobuild_country = {
							change_variable = {
								which = autobuild_farm_planet
								value = 1
							}
						}
					}
					every_tile = {
						limit = {
							tile_has_food_more_than_others = yes
							has_blocker = no
							has_building = no
							event_target:autobuild_country = {
								check_variable = {
									which = autobuild_farm_planet
									value < autobuild_farm_global
								}
							}
						}
						event_target:autobuild_country = {
							change_variable = {
								which = autobuild_farm_planet
								value = 1
							}
						}
						if = {
							limit = {
								or = {
									exists = pop
									planet = {
										has_any_farm = no
									}
								}
							}
							add_building_construction = "building_basic_farm"
						}
					}
				}
			}
		}
		if = {
			limit = {
				has_modifier = "planet_forge_auto_build"			## planet of mines
				exists = owner
				or = {
					free_building_tiles > 0
					has_any_power_plant = yes
					has_any_science_lab = yes
					and = {
						owner = { has_technology = "tech_neural_implants" }
						not = {	has_building = "building_slave_processing" }
						count_pops = {
							limit = { is_enslaved = yes }
							count > 3								## at least 4 slaves
						}
					}
					and = {
						owner = { has_technology = "tech_mineral_processing_1" }
						nor = {
							has_building = "building_mineral_processing_plant_1"
							has_building = "building_mineral_processing_plant_2"
						}
					}
				}
			}
			if = {
				limit = {
					or = {
						has_building = "building_capital_1"
						has_building = "building_capital_2"
						has_building = "building_capital_3"
					}
				}
				every_tile = {
					limit = {
						or = {
							has_building = no
							has_any_power_plant = yes
							has_any_science_lab = yes
							has_any_mines = yes
						}
						nor = {
							has_building = "building_mineral_processing_plant_1"
							has_building = "building_mineral_processing_plant_2"
						}
					}
					if = {
						limit = {
							tile_has_any_minerals = no
							exists = owner
							owner = { has_technology = "tech_neural_implants" }
							planet = {
								not = {	has_building = "building_slave_processing" }
								count_pops = {
									limit = { is_enslaved = yes }
									count > 3								## at least 4 slaves
								}
							}
						}
						add_building_construction = "building_slave_processing"						
						else = {
							if = {
								limit = {
									or = {
										has_building = no
										has_any_power_plant = yes
										has_any_science_lab = yes
										has_any_mines = yes
									}
									planet = {
										nor = {
											has_building = "building_mineral_processing_plant_1"
											has_building = "building_mineral_processing_plant_2"
										}
									}
									exists = owner
									owner = { has_technology = "tech_mineral_processing_1" }
								}
								add_building_construction = "building_mineral_processing_plant_1"
								else = {
									if = {
										limit = {
											or = {
												has_building = no
												has_any_power_plant = yes
												has_any_science_lab = yes
											}
											exists = pop
											pop = {	is_being_purged = no }
										}
									add_building_construction = "building_mining_network_1"
									}
								}
							}
						}
					}
				}
				else = {
					if = {
						limit = { has_building = "building_colony_shelter" }
						every_tile = {
							limit = {
								or = {
									has_building = no
									has_any_power_plant = yes
									has_any_science_lab = yes
									has_any_mines = yes
								}
							}
							if = {
								limit = {
									tile_has_any_minerals = no
									or = {
										has_building = no
										has_any_power_plant = yes
										has_any_science_lab = yes
										has_any_mines = yes
									}
									nor = {
										has_building = "building_mineral_processing_plant_1"
										has_building = "building_mineral_processing_plant_2"
									}
									exists = owner
									owner = { has_technology = "tech_neural_implants" }
									planet = {
										not = {	has_building = "building_slave_processing" }
										count_pops = {
											limit = { is_enslaved = yes }
											count > 3								## at least 4 slaves
										}
									}
								}
								add_building_construction = "building_slave_processing"
								else = {
									if = {
										limit = {
											or = {
												has_building = no
												has_any_power_plant = yes
												has_any_science_lab = yes
											}
											exists = pop
											pop = {	is_being_purged = no }
										}
										add_building_construction = "building_basic_mine"
									}
								}
							}
						}
					}
				}
			}
		}
		if = {
			limit = {
				has_modifier = "planet_power_plant_auto_build"		## planet of power plants
				exists = owner
				or = {
					free_building_tiles > 0
					has_any_mines = yes
					has_any_science_lab = yes
					and = {
						owner = { has_technology = "tech_power_hub_1" }
						nor = {
							has_building = "building_power_hub_1"
							has_building = "building_power_hub_2"
						}
					}
				}
			}
			if = {
				limit = {
					or = {
						has_building = "building_capital_1"
						has_building = "building_capital_2"
						has_building = "building_capital_3"
					}
				}
				every_tile = {
					limit = {
						or = {
							has_building = no
							has_any_mines = yes
							has_any_science_lab = yes
							has_any_power_plant = yes
						}
					}
					if = {
						limit = {
							exists = owner
							owner = { has_technology = "tech_power_hub_1" }
							planet = {
								nor = {
									has_building = "building_power_hub_1"
									has_building = "building_power_hub_2"
								}
							}
						}
						add_building_construction = "building_power_hub_1"
						else = {
							if = {
								limit = {
									or = {
										has_building = no
										has_any_mines = yes
										has_any_science_lab = yes
									}
									exists = pop
									pop = {
										is_being_purged = no
										is_slavebot = no
									}
								}
								add_building_construction = "building_power_plant_1"
							}
						} 
					} 
				}
				else = {
					if = {
						limit = { has_building = "building_colony_shelter" }
						every_tile = {
							limit = {
								exists = pop
								pop = {
									is_being_purged = no
									is_slavebot = no
								}
								or = {
									has_building = no
									has_any_mines = yes
									has_any_science_lab = yes
								}
							}
							add_building_construction = "building_basic_power_plant"
						}
					}
				}
			} 
		}
		if = {
			limit = {
				has_modifier = "planet_labs_auto_build"				## planet of labs
				or = {
					free_building_tiles > 0
					has_any_mines = yes
					has_any_power_plant = yes
				}
				or = {
					has_building = "building_capital_1"
					has_building = "building_capital_2"
					has_building = "building_capital_3"
					has_building = "building_colony_shelter"
				}
			}
			every_tile = {
				limit = {
					exists = pop
					pop = {
						is_being_purged = no
						is_slavebot = no
					}
					or = {
						has_building = no
						has_any_mines = yes
						has_any_power_plant = yes
					}
				}
				add_building_construction = "building_basic_science_lab_1"
			}
		}
	}
}

## local auto build planet farm
planet_event = {
	id = autobuild.104
	title = OK
	desc = OK
	hide_window = yes
	is_triggered_only = yes

	trigger = {
		exists = owner
		owner = {
			is_ai = no
			or = {
				not = { has_country_flag = auto_build_cost }
				and = {
					has_country_flag = auto_build_cost_5000
					minerals > 5000
				}
				and = {
					has_country_flag = auto_build_cost_2500
					minerals > 2500
				}
				and = {
					has_country_flag = auto_build_cost_1000
					minerals > 1000
				}
				and = {
					has_country_flag = auto_build_cost_500
					minerals > 500
				}
			}
		}
		has_modifier = "planet_farms_auto_build"
		has_building_construction = no
		or = {
			free_building_tiles > 0
			has_any_power_plant = yes
			has_any_science_lab = yes
			has_any_mines = yes
		}
	}

	immediate = {		if = {			limit = {				or = {					has_building = "building_capital_1"					has_building = "building_capital_2"					has_building = "building_capital_3"				}			}			every_tile = {				limit = {					or = {						has_building = no						has_any_power_plant = yes						has_any_science_lab = yes						has_any_mines = yes					}					exists = pop					pop = {	is_being_purged = no }				}				add_building_construction = "building_hydroponics_farm_1"			}			else = {				if = {					limit = { has_building = "building_colony_shelter" }					every_tile = {						limit = {							or = {								has_building = no								has_any_power_plant = yes								has_any_science_lab = yes								has_any_mines = yes							}							exists = pop							pop = {	is_being_purged = no }						}						add_building_construction = "building_basic_farm"					}				}			}		}	}
}

## local auto update
planet_event = {
	id = autobuild.105
	title = OK
	desc = OK
	hide_window = yes
	is_triggered_only = yes

	trigger = {
		exists = owner
		owner = {
			is_ai = no
			or = {
				not = { has_country_flag = auto_build_cost }
				and = {
					has_country_flag = auto_build_cost_5000
					minerals > 5000
				}
				and = {
					has_country_flag = auto_build_cost_2500
					minerals > 2500
				}
				and = {
					has_country_flag = auto_build_cost_1000
					minerals > 1000
				}
				and = {
					has_country_flag = auto_build_cost_500
					minerals > 500
				}
			}
			or = {
				has_country_flag = auto_build_1
				has_country_flag = auto_build_5
				has_country_flag = auto_build_6
			}
		}
		has_building_construction = no
		not = { has_modifier = "free_from_auto_update" }
	}

	immediate = {		if = {			limit = {
				owner = { has_country_flag = auto_build_1 }				or = {					has_building = "building_capital_1"					has_building = "building_capital_2"					has_building = "building_capital_3"				}			}			every_tile = {				limit = {					exists = pop					pop = { is_being_purged = no }					nor = {						has_building = "building_capital_3"						has_building = "building_power_plant_5"						has_building = "betharian_power_plant_4"						has_building = "building_power_hub_2"						has_building = "building_hydroponics_farm_5"						has_building = "building_mineral_silo_3"						has_building = "building_mining_network_5"						has_building = "building_mineral_processing_plant_2"						has_building = "building_engineering_facility_4"						has_building = "building_physics_lab_4"						has_building = "building_biolab_4"						and = {							or = {								has_building = "building_power_plant_4"								has_building = "building_hydroponics_farm_4"								has_building = "building_mining_network_4"								has_building = "building_engineering_facility_3"								has_building = "building_physics_lab_3"								has_building = "building_biolab_3"							}							planet = {								not = { has_building = "building_capital_3" }							}						}					}				}				switch = {					trigger = has_building
					"building_basic_power_plant" = { add_building_construction = "building_power_plant_1" }					"building_power_plant_1" = { add_building_construction = "building_power_plant_2" }					"building_power_plant_2" = { add_building_construction = "building_power_plant_3" }					"building_power_plant_3" = { add_building_construction = "building_power_plant_4" }					"building_power_plant_4" = { add_building_construction = "building_power_plant_5" }					"building_basic_farm" = { add_building_construction = "building_hydroponics_farm_1" }					"building_hydroponics_farm_1" = { add_building_construction = "building_hydroponics_farm_2" }					"building_hydroponics_farm_2" = { add_building_construction = "building_hydroponics_farm_3" }					"building_hydroponics_farm_3" = { add_building_construction = "building_hydroponics_farm_4" }					"building_hydroponics_farm_4" = { add_building_construction = "building_hydroponics_farm_5" }					"building_basic_mine" = { add_building_construction = "building_mining_network_1" }					"building_mining_network_1" = { add_building_construction = "building_mining_network_2" }					"building_mining_network_2" = { add_building_construction = "building_mining_network_3" }					"building_mining_network_3" = { add_building_construction = "building_mining_network_4" }					"building_mining_network_4" = { add_building_construction = "building_mining_network_5" }					"building_engineering_facility_1" = { add_building_construction = "building_engineering_facility_2" }					"building_engineering_facility_2" = { add_building_construction = "building_engineering_facility_3" }					"building_engineering_facility_3" = { add_building_construction = "building_engineering_facility_4" }					"building_physics_lab_1" = { add_building_construction = "building_physics_lab_2" }					"building_physics_lab_2" = { add_building_construction = "building_physics_lab_3" }					"building_physics_lab_3" = { add_building_construction = "building_physics_lab_4" }					"building_biolab_1" = { add_building_construction = "building_biolab_2" }					"building_biolab_2" = { add_building_construction = "building_biolab_3" }					"building_biolab_3" = { add_building_construction = "building_biolab_4" }					"betharian_power_plant_1" = { add_building_construction = "betharian_power_plant_2" }					"betharian_power_plant_2" = { add_building_construction = "betharian_power_plant_3" }					"betharian_power_plant_3" = { add_building_construction = "betharian_power_plant_4" }					"building_mineral_silo_1" = { add_building_construction = "building_mineral_silo_2" }					"building_mineral_silo_2" = { add_building_construction = "building_mineral_silo_3" }					"building_primitive_factory" = { add_building_construction = "building_mining_network_1" }					"building_primitive_farm" = { add_building_construction = "building_hydroponics_farm_1" }
					"building_power_hub_1" = { add_building_construction = "building_power_hub_2" }
					"building_mineral_processing_plant_1" = { add_building_construction = "building_mineral_processing_plant_2" }
					"building_clinic" = { add_building_construction = "building_hospital" }
					## alphamod
					"building_radio_telescope_array" = { add_building_construction = "building_radio_telescope_array_2" }
					"building_radio_telescope_array_2" = { add_building_construction = "building_radio_telescope_array_3" }
					"building_radio_telescope_array_3" = { add_building_construction = "building_radio_telescope_array_4" }
					"building_rocket_launchsite" = { add_building_construction = "building_shuttle_port" }
					"building_shuttle_port" = { add_building_construction = "building_advanced_shuttleport" }
					"building_lightmechbay" = { add_building_construction = "building_mediummechbay" }
					"building_mediummechbay" = { add_building_construction = "building_heavymechbay" }
					"building_hydro_plant" = { add_building_construction = "building_hydro_plant_2" }
					"building_basic_farm_adv" = { add_building_construction = "building_hydroponics_farm_1_adv" }
					"building_hydroponics_farm_1_adv" = { add_building_construction = "building_hydroponics_farm_2_adv" }
					"building_hydroponics_farm_2_adv" = { add_building_construction = "building_hydroponics_farm_3_adv" }
					"building_hydroponics_farm_3_adv" = { add_building_construction = "building_hydroponics_farm_4_adv" }
					"building_traditional_farm" = { add_building_construction = "building_preservation" }
					"building_frontier_town" = { add_building_construction = "building_frontier_city" }
					"building_fuel_sourcer" = { add_building_construction = "building_fuel_sourcer_2" }
					"building_fuel_sourcer_2" = { add_building_construction = "building_fuel_sourcer_3" }
					"building_fuel_refinery" = { add_building_construction = "building_fuel_refinery_2" }
					"building_alpha_fuel_converter" = { add_building_construction = "building_alpha_fuel_converter_2" }
					"building_alpha_fuel_converter_2" = { add_building_construction = "building_alpha_fuel_converter_3" }
					"building_alpha_fuel_converter_3" = { add_building_construction = "building_alpha_fuel_converter_4" }
					"building_traditional_plantation" = { add_building_construction = "building_preservation" }
					"building_moisture_farm" = { add_building_construction = "building_moisture_farm_2" }
					"building_moisture_farm_2" = { add_building_construction = "building_moisture_farm_3" }
					"building_sand_sifter" = { add_building_construction = "building_sand_sifter_2" }
					"building_greenhousing" = { add_building_construction = "building_vertical_farms" }
					"building_water_excavator" = { add_building_construction = "building_water_excavator_2" }
					"building_reservoir" = { add_building_construction = "building_reservoir_2" }
					"building_reservoir_2" = { add_building_construction = "building_reservoir_3" }
					"building_ice_rig" = { add_building_construction = "building_ice_rig_2" }
					"building_water_excavator" = { add_building_construction = "building_water_excavator_2" }									}			}		}
		if = {
			limit = {
				owner = { has_country_flag = auto_build_5 }				or = {					has_building = "building_capital_1"					has_building = "building_capital_2"					has_building = "building_capital_3"				}				has_building = "building_basic_science_lab_1"			}			if = {
				limit = {
					or = {
						has_planet_modifier = "pm_titanic_life"
						has_planet_modifier = "pm_atmospheric_hallucinogen"
						has_modifier = "atmospheric_hallucinogen_good"
						has_modifier = "subterranean_civilization"
						has_planet_modifier = "pm_dangerous_wildlife"
						has_modifier = "society_animal_life"
						## alphamod
						has_planet_modifier = "pm_micro_organisms"
						has_planet_modifier = "pm_subterranean_lifeforms"
					}
				}
				every_tile = {
					limit = {
						has_building = "building_basic_science_lab_1"
						exists = pop
						pop = { is_being_purged = no }
					}
					add_building_construction = "building_biolab_1"
				}
				else = {
					if = {
						limit = {
							or = {
								has_planet_modifier = "pm_strong_magnetic_field"
								has_planet_modifier = "pm_wild_storms"
								## alphamod
								has_planet_modifier = "pm_physicists_paradise"
							}
						}
						every_tile = {
							limit = {
								has_building = "building_basic_science_lab_1"
								exists = pop
								pop = { is_being_purged = no }
							}
							add_building_construction = "building_physics_lab_1"
						}
						else = {
							if = {
								limit = {
									has_planet_modifier = "pm_unstable_tectonics"
									## alphamod
									has_planet_modifier = "pm_engineers_paradise"
									has_planet_modifier = "pm_underground_caverns"
									has_planet_modifier = "pm_crystalline_formations"
									has_planet_modifier = "pm_geothermal_activity"
									has_planet_modifier = "pm_volcanic_ash_clouds"
								}
								every_tile = {
									limit = {
										has_building = "building_basic_science_lab_1"
										exists = pop
										pop = { is_being_purged = no }
									}
								add_building_construction = "building_engineering_facility_1"
								}							}						}					}				}			}		}

		## to do labs by emp priority ##

		## labs by semi random ##

		if = {
			limit = {				owner = { has_country_flag = auto_build_6 }				or = {					has_building = "building_capital_1"					has_building = "building_capital_2"					has_building = "building_capital_3"				}				has_building = "building_basic_science_lab_1"			}			every_tile = {				limit = {					has_building = "building_basic_science_lab_1"					exists = pop					pop = { is_being_purged = no }				}				if = {					limit = {						pop = { has_trait = trait_natural_sociologists }					}					add_building_construction = "building_biolab_1"					else = {						if = {							limit = {								pop = { has_trait = trait_natural_physicists }							}							add_building_construction = "building_physics_lab_1"							else = {								if = {									limit = {										pop = { has_trait = trait_natural_engineers }									}									add_building_construction = "building_engineering_facility_1"									else = {										if = {											limit = {												has_resource = {													type = physics_research													amount > 0												}											}											add_building_construction = "building_physics_lab_1"											else = {												if = {													limit = {														has_resource = {															type = society_research															amount > 0														}													}													add_building_construction = "building_biolab_1"													else = {														if = {															limit = {																has_resource = {																	type = engineering_research																	amount > 0																}															}															add_building_construction = "building_engineering_facility_1"															else = {																random_list = {																	33 = { add_building_construction = "building_physics_lab_1" }																	33 = { add_building_construction = "building_biolab_1" }																	33 = { add_building_construction = "building_engineering_facility_1" }																}															}														}													}												}											}										}									}								}							}						}					}				}			}		}	}
}
## local auto update influence cost
planet_event = {
	id = autobuild.106
	title = OK
	desc = OK
	hide_window = yes
	is_triggered_only = yes

	trigger = {
		exists = owner
		owner = {
			is_ai = no
			or = {
				not = { has_country_flag = auto_build_cost }
				and = {
					has_country_flag = auto_build_cost_5000
					minerals > 5000
				}
				and = {
					has_country_flag = auto_build_cost_2500
					minerals > 2500
				}
				and = {
					has_country_flag = auto_build_cost_1000
					minerals > 1000
				}
				and = {
					has_country_flag = auto_build_cost_500
					minerals > 500
				}
			}
			or = {
				and = {
					has_country_flag = auto_build_cost_inf_500
					influence > 500
				}
				and = {
					has_country_flag = auto_build_cost_inf_250
					influence > 250
				}
				and = {
					has_country_flag = auto_build_cost_inf_100
					influence > 100
				}
			}
			has_country_flag = auto_build_2
		}
		has_building_construction = no
		not = { has_modifier = "free_from_auto_update" }
	}

	immediate = {
		if = {			limit = {				or = {					has_building = "building_colony_shelter"					has_building = "building_capital_1"					and = {						has_building = "building_capital_2"						is_capital = yes					}					has_building = "building_power_hub_1"					has_building = "building_mineral_processing_plant_1"				}			}			every_tile = {				limit = {					exists = pop					pop = { is_being_purged = no }				}				switch = {					trigger = has_building
					"building_colony_shelter" = { add_building_construction = "building_capital_1" }					"building_capital_1" = { add_building_construction = "building_capital_2" }					"building_capital_2" = { add_building_construction = "building_capital_3" }					## alphamod
					"building_academy" = { add_building_construction = "building_academy_2" }
					"building_intelligence_directorate" = { add_building_construction = "building_intelligence_directorate_2" }
					"building_surveillance_center" = { add_building_construction = "building_surveillance_center_2" }
					"building_security_center" = { add_building_construction = "building_security_center_2" }
					"building_open_embassy" = { add_building_construction = "building_open_embassy_2" }
					"building_xeno_diplomacy_corp" = { add_building_construction = "building_peace_corps" }
					"building_tradestation" = { add_building_construction = "building_trade_company" }							}			}		}	}
}

## menu
country_event = {
	id = autobuild.3
	title = "autobuild.3.name"
	desc = "autobuild.3.desc"
	picture = GFX_evt_alien_city
	is_triggered_only = yes
	
	option = {
		name = "auto_build_0"
		trigger = {
			not = {
				and = {
					has_country_flag = auto_build_1
					has_country_flag = auto_build_2
					has_country_flag = auto_build_3
					has_country_flag = auto_build_4
					has_country_flag = auto_build_4_1
					has_country_flag = auto_build_4_2
					has_country_flag = auto_build_5
					has_country_flag = auto_build_6
				}
			}
		}
		custom_tooltip = auto_build_0.tooltip
		hidden_effect = {
			set_country_flag = auto_build_1
			set_country_flag = auto_build_2
			set_country_flag = auto_build_3
			if = {
				limit = { not = { has_policy_flag = slavery_not_allowed } }
				set_country_flag = auto_build_4
				set_country_flag = auto_build_4_1
				set_country_flag = auto_build_4_2
			}
			set_country_flag = auto_build_5
			set_country_flag = auto_build_6
			country_event = { id = autobuild.3 }
		}
	}
	option = {
		name = "auto_build_fleet_on"
	#	trigger = {
	#		any_owned_fleet = {
	#			is_ship_class = shipclass_constructor
	#			not = { has_fleet_flag = autobuild_fleet }
	#		}
	#	}
		custom_tooltip = auto_build_fleet_on.tooltip
		hidden_effect = {
			country_event = { id = autobuild.3 }
			set_country_flag = auto_build_fleet
			every_owned_fleet = {
				limit = {
					is_ship_class = shipclass_constructor
					not = { has_fleet_flag = autobuild_fleet }
				}
				fleet_event = { id = autobuild.0}
			}
		}
	}
	option = {
		name = "auto_build_fleet_off"
		trigger = {	has_country_flag = auto_build_fleet }
		custom_tooltip = auto_build_fleet.tooltip
		hidden_effect = {
			country_event = { id = autobuild.3 }
			every_owned_fleet = {
				limit = {
					is_ship_class = shipclass_constructor
					has_fleet_flag = autobuild_fleet
				}
				clear_fleet_actions = this
				set_event_locked = no
				remove_fleet_flag = autobuild_fleet
			}
			remove_country_flag = auto_build_fleet
		}
	}
	option = {
		name = "auto_build_1_on"
		trigger = {	not = { has_country_flag = auto_build_1 } }
		custom_tooltip = auto_build_1_on.tooltip
		hidden_effect = { country_event = { id = autobuild.3 } set_country_flag = auto_build_1 }
	}
	option = {
		name = "auto_build_1_off"
		trigger = {	has_country_flag = auto_build_1 }
		custom_tooltip = auto_build_1_off.tooltip
		hidden_effect = { country_event = { id = autobuild.3 } remove_country_flag = auto_build_1 }
	}
	option = {
		name = "auto_build_2_on"
		trigger = {	not = { has_country_flag = auto_build_2 } }
		custom_tooltip = auto_build_2_on.tooltip
		hidden_effect = { country_event = { id = autobuild.3 } set_country_flag = auto_build_2 }
	}
	option = {
		name = "auto_build_2_off"
		trigger = {	has_country_flag = auto_build_2 }
		custom_tooltip = auto_build_2_off.tooltip
		hidden_effect = { country_event = { id = autobuild.3 } remove_country_flag = auto_build_2 }
	}
	option = {
		name = "auto_build_3_on"
		trigger = {	not = { has_country_flag = auto_build_3 } }
		custom_tooltip = auto_build_3_on.tooltip
		hidden_effect = { country_event = { id = autobuild.3 } set_country_flag = auto_build_3 }
	}
	option = {
		name = "auto_build_3_off"
		trigger = {	has_country_flag = auto_build_3 }
		custom_tooltip = auto_build_3_off.tooltip
		hidden_effect = { country_event = { id = autobuild.3 } remove_country_flag = auto_build_3 }
	}
	option = {
		name = "auto_build_7_on"
		trigger = { 
			nor = {
				has_country_flag = auto_build_7_1
				has_country_flag = auto_build_7_2
				has_country_flag = auto_build_7_3
				has_country_flag = auto_build_7_4
			##	has_country_flag = auto_build_7_5
				has_country_flag = auto_build_7_6
				has_country_flag = auto_build_7_7
			}
		}
		custom_tooltip = auto_build_7_on.tooltip
		hidden_effect = { country_event = { id = autobuild.7 } }
	}
	option = {
		name = "auto_build_7_settings"
		trigger = {
			or = {
				has_country_flag = auto_build_7_1
				has_country_flag = auto_build_7_2
				has_country_flag = auto_build_7_3
				has_country_flag = auto_build_7_4
			##	has_country_flag = auto_build_7_5
				has_country_flag = auto_build_7_6
				has_country_flag = auto_build_7_7
				has_country_flag = auto_build_7_8
				has_country_flag = auto_build_7_9
				has_country_flag = auto_build_7_10
				has_country_flag = auto_build_7_11
			}
		}
	#	custom_tooltip = auto_build_7_on.tooltip
		hidden_effect = { country_event = { id = autobuild.7 } }
	}
	option = {
		name = "auto_build_7_off"
		trigger = {
			or = {
				has_country_flag = auto_build_7_1
				has_country_flag = auto_build_7_2
				has_country_flag = auto_build_7_3
				has_country_flag = auto_build_7_4
			##	has_country_flag = auto_build_7_5
				has_country_flag = auto_build_7_6
				has_country_flag = auto_build_7_7
				has_country_flag = auto_build_7_8
				has_country_flag = auto_build_7_9
				has_country_flag = auto_build_7_10
				has_country_flag = auto_build_7_11
			}
		}
		hidden_effect = {
			remove_country_flag = auto_build_7_1
			remove_country_flag = auto_build_7_2
			remove_country_flag = auto_build_7_3
			remove_country_flag = auto_build_7_4
		##	remove_country_flag = auto_build_7_5
			remove_country_flag = auto_build_7_6
			remove_country_flag = auto_build_7_7
			remove_country_flag = auto_build_7_8
			remove_country_flag = auto_build_7_9
			remove_country_flag = auto_build_7_10
			remove_country_flag = auto_build_7_11
			country_event = { id = autobuild.3 }
		}
	}
	option = {
		name = "auto_build_4_on"
		trigger = {
			not = { has_country_flag = auto_build_4 }
			or = {
				not = { has_policy_flag = slavery_not_allowed }
				has_policy_flag = ai_servitude
			}
		}
		custom_tooltip = auto_build_4_on.tooltip
		hidden_effect = { country_event = { id = autobuild.3 } set_country_flag = auto_build_4 }
	}
	option = {
		name = "auto_build_4_off"
		trigger = {	has_country_flag = auto_build_4 }
		custom_tooltip = auto_build_4_off.tooltip
		hidden_effect = { country_event = { id = autobuild.3 } remove_country_flag = auto_build_4 }
	}
	option = {
		name = "auto_build_4_1_on"
		trigger = {
			has_country_flag = auto_build_4
			not = { has_country_flag = auto_build_4_1 }
			}
		custom_tooltip = auto_build_4_1_on.tooltip
		hidden_effect = { country_event = { id = autobuild.3 } set_country_flag = auto_build_4_1 }
	}
	option = {
		name = "auto_build_4_1_off"
		trigger = {	has_country_flag = auto_build_4_1 }
		custom_tooltip = auto_build_4_1_off.tooltip
		hidden_effect = { country_event = { id = autobuild.3 } remove_country_flag = auto_build_4_1 }
	}
	option = {
		name = "auto_build_4_2_on"
		trigger = {
			
			or = {
				not = { has_policy_flag = slavery_not_allowed }
				has_policy_flag = ai_servitude
			}
			not = { has_country_flag = auto_build_4_2 }
		}
		custom_tooltip = auto_build_4_2_on.tooltip
		hidden_effect = { country_event = { id = autobuild.3 } set_country_flag = auto_build_4_2 }
	}
	option = {
		name = "auto_build_4_2_off"
		trigger = {	has_country_flag = auto_build_4_2 }
		custom_tooltip = auto_build_4_2_off.tooltip
		hidden_effect = { country_event = { id = autobuild.3 } remove_country_flag = auto_build_4_2 }
	}
	option = {
		name = "auto_build_5_on"
		trigger = {	not = { has_country_flag = auto_build_5 } }
		custom_tooltip = auto_build_5_on.tooltip
		hidden_effect = { country_event = { id = autobuild.3 } set_country_flag = auto_build_5 }
	}
	option = {
		name = "auto_build_5_off"
		trigger = {	has_country_flag = auto_build_5 }
		custom_tooltip = auto_build_5_off.tooltip
		hidden_effect = { country_event = { id = autobuild.3 } remove_country_flag = auto_build_5 }
	}
	option = {
		name = "auto_build_6_on"
		trigger = {	not = { has_country_flag = auto_build_6 } }
		custom_tooltip = auto_build_6_on.tooltip
		hidden_effect = { country_event = { id = autobuild.3 } set_country_flag = auto_build_6 }
	}
	option = {
		name = "auto_build_6_off"
		trigger = {	has_country_flag = auto_build_6 }
		custom_tooltip = auto_build_6_off.tooltip
		hidden_effect = { country_event = { id = autobuild.3 } remove_country_flag = auto_build_6 }
	}
	option = {
		name = "auto_build_planet_unique"
		custom_tooltip = auto_build_planet_unique.tooltip
		hidden_effect = { country_event = { id = autobuild.6 }}
	}
	option = {
		name = "auto_build_10_on"
		trigger = { not = { has_country_flag = auto_build_10	} }
		custom_tooltip = auto_build_10_on.tooltip
		hidden_effect = { country_event = { id = autobuild.3 } set_country_flag = auto_build_10 }
	}
	option = {
		name = "auto_build_10_off"
		trigger = {	has_country_flag = auto_build_10 }
		custom_tooltip = auto_build_10_off.tooltip
		hidden_effect = { country_event = { id = autobuild.3 } remove_country_flag = auto_build_10 }
	}
	option = {
		name = "auto_build_cost_on"
		trigger = {	not = { has_country_flag = auto_build_cost } }
		custom_tooltip = auto_build_cost_on.tooltip
		hidden_effect = {
			country_event = { id = autobuild.3 }
			set_country_flag = auto_build_cost
		}
	}
	option = {
		name = "auto_build_cost_off"
		trigger = {	has_country_flag = auto_build_cost }
		custom_tooltip = auto_build_cost_off.tooltip
		hidden_effect = { country_event = { id = autobuild.3 } remove_country_flag = auto_build_cost }
	}
	option = {
		name = "auto_build_cost_menu"
		trigger = { has_country_flag = auto_build_cost }
		custom_tooltip = auto_build_cost_menu.tooltip
		hidden_effect = { country_event = { id = autobuild.4 } country_event = { id = autobuild.10 } }
	}
	option = {
		name = "auto_build_farm_menu"
		custom_tooltip = auto_build_farm_menu.tooltip
		hidden_effect = { country_event = { id = autobuild.5 } }
	}
	option = {
		name = "modmenu_remove"
		trigger = {
			or = {
				has_country_flag = auto_build_1
				has_country_flag = auto_build_2
				has_country_flag = auto_build_3
				has_country_flag = auto_build_4
				has_country_flag = auto_build_4_1
				has_country_flag = auto_build_4_2
				has_country_flag = auto_build_5
				has_country_flag = auto_build_6
				has_country_flag = auto_build_7_1
				has_country_flag = auto_build_7_2
				has_country_flag = auto_build_7_3
				has_country_flag = auto_build_7_4
			##	has_country_flag = auto_build_7_5
				has_country_flag = auto_build_7_6
				has_country_flag = auto_build_7_7
				has_country_flag = auto_build_7_8
				has_country_flag = auto_build_7_9
				has_country_flag = auto_build_7_10
				has_country_flag = auto_build_7_11
				has_country_flag = auto_build_8
				has_country_flag = auto_build_9
				has_country_flag = auto_build_10
				has_country_flag = auto_build_11
				has_country_flag = auto_build_cost
				has_country_flag = auto_build_cost_5000
				has_country_flag = auto_build_cost_2500
				has_country_flag = auto_build_cost_1000
				has_country_flag = auto_build_cost_500
				has_country_flag = auto_build_cost_inf_500
				has_country_flag = auto_build_cost_inf_250
				has_country_flag = auto_build_cost_inf_100
				has_country_flag = auto_build_fleet
				any_owned_planet = {
					or = {
						has_modifier = "planet_forge_auto_build"
						has_modifier = "planet_power_plant_auto_build"
						has_modifier = "planet_labs_auto_build"
						has_modifier = "planet_farms_auto_build"
					}
				}
			}
		}
		custom_tooltip = modmenu_remove.tooltip
		hidden_effect = { country_event = { id = autobuild.99 } country_event = { id = autobuild.3 } }
	}
	option = {
		name = "modmenu_exit"
		hidden_effect = { country_event = { id = autobuild.1 } }
	}
}

# cost menu
country_event = {
	id = autobuild.4
	title = "autobuild.3.name"
	desc = "autobuild.4.desc"
	picture = GFX_evt_alien_city
	is_triggered_only = yes
	
	option = {
		name = "auto_build_cost_5000"
		#custom_tooltip = auto_build_5000.tooltip
		hidden_effect = {
			country_event = { id = autobuild.3 }
			set_country_flag = auto_build_cost_5000
			remove_country_flag = auto_build_cost_2500
			remove_country_flag = auto_build_cost_1000
			remove_country_flag = auto_build_cost_500
		}
	}
	option = {
		name = "auto_build_cost_2500"
		#custom_tooltip = auto_build_2500.tooltip
		hidden_effect = {
			country_event = { id = autobuild.3 }
			set_country_flag = auto_build_cost_2500
			remove_country_flag = auto_build_cost_5000
			remove_country_flag = auto_build_cost_1000
			remove_country_flag = auto_build_cost_500
			}
	}
	option = {
		name = "auto_build_cost_1000"
		#custom_tooltip = auto_build_1000.tooltip
		hidden_effect = {
			country_event = { id = autobuild.3 }
			set_country_flag = auto_build_cost_1000
			remove_country_flag = auto_build_cost_5000
			remove_country_flag = auto_build_cost_2500
			remove_country_flag = auto_build_cost_500
		}
	}
	option = {
		name = "auto_build_cost_500"
		#custom_tooltip = auto_build_500.tooltip
		hidden_effect = {
			country_event = { id = autobuild.3 }
			set_country_flag = auto_build_cost_500
			remove_country_flag = auto_build_cost_5000
			remove_country_flag = auto_build_cost_2500
			remove_country_flag = auto_build_cost_1000
		}
	}
	option = {
		name = "auto_build_cost_inf_500"
		#custom_tooltip = auto_build_cost_inf_500.tooltip
		hidden_effect = {
			country_event = { id = autobuild.3 }
			set_country_flag = auto_build_cost_inf_500
			remove_country_flag = auto_build_cost_inf_250
			remove_country_flag = auto_build_cost_inf_100
		}
	}
	option = {
		name = "auto_build_cost_inf_250"
		#custom_tooltip = auto_build_cost_inf_250.tooltip
		hidden_effect = {
			country_event = { id = autobuild.3 }
			set_country_flag = auto_build_cost_inf_250
			remove_country_flag = auto_build_cost_inf_500
			remove_country_flag = auto_build_cost_inf_100
		}
	}
	option = {
		name = "auto_build_cost_inf_100"
		#custom_tooltip = auto_build_cost_inf_100.tooltip
		hidden_effect = {
			country_event = { id = autobuild.3 }
			set_country_flag = auto_build_cost_inf_100
			remove_country_flag = auto_build_cost_inf_500
			remove_country_flag = auto_build_cost_inf_250
		}
	}
	option = {
		name = "modmenu_return"
		hidden_effect = { country_event = { id = autobuild.3 }}
	}
}

#farm menu
country_event = {
	id = autobuild.5
	title = "autobuild.3.name"
	desc = "autobuild.5.desc"
	picture = GFX_evt_alien_city
	is_triggered_only = yes
	
	option = {
		name = "auto_build_farm_0"
		#custom_tooltip = auto_build_farm_0
		hidden_effect = {
			country_event = { id = autobuild.3 }
			set_variable = {
				which = autobuild_farm_global
				value = 0
			}
		}
	}
	option = {
		name = "auto_build_farm_1"
		#custom_tooltip = auto_build_farm_1
		hidden_effect = {
			country_event = { id = autobuild.3 }
			set_variable = {
				which = autobuild_farm_global
				value = 2
			}
		}
	}
	option = {
		name = "auto_build_farm_2"
		#custom_tooltip = auto_build_farm_2
		hidden_effect = {
			country_event = { id = autobuild.3 }
			set_variable = {
				which = autobuild_farm_global
				value = 3
			}
		}
	}
	option = {
		name = "auto_build_farm_3"
		#custom_tooltip = auto_build_farm_3
		hidden_effect = {
			country_event = { id = autobuild.3 }
			set_variable = {
				which = autobuild_farm_global
				value = 4
			}
		}
	}
	option = {
		name = "auto_build_farm_4"
		#custom_tooltip = auto_build_farm_4
		hidden_effect = {
			country_event = { id = autobuild.3 }
			set_variable = {
				which = autobuild_farm_global
				value = 5
			}
		}
	}
	option = {
		name = "auto_build_farm_5"
		#custom_tooltip = auto_build_farm_5
		hidden_effect = {
			country_event = { id = autobuild.3 }
			set_variable = {
				which = autobuild_farm_global
				value = 6
			}
		}
	}
	option = {
		name = "auto_build_farm_replace_on"
		trigger = {	not = { has_country_flag = auto_build_farm_replace } }
		custom_tooltip = auto_build_farm_replace_on.tooltip
		hidden_effect = { country_event = { id = autobuild.3 } set_country_flag = auto_build_farm_replace }
	}
	option = {
		name = "auto_build_farm_replace_off"
		trigger = {	has_country_flag = auto_build_farm_replace }
		custom_tooltip = auto_build_farm_replace_off.tooltip
		hidden_effect = { country_event = { id = autobuild.3 } remove_country_flag = auto_build_farm_replace }
	}
	option = {
		name = "modmenu_return"
		hidden_effect = { country_event = { id = autobuild.3 }}
	}
}

# unic buildings
country_event = {
	id = autobuild.6
	title = "autobuild.3.name"
	desc = "autobuild.6.desc"
	picture = GFX_evt_alien_city
	is_triggered_only = yes
	
	option = {
		name = "auto_build_8_on"
		trigger = {
			has_technology = "tech_frontier_health"
			not = { has_country_flag = auto_build_8	}
		}
		custom_tooltip = auto_build_8_on.tooltip
		hidden_effect = { country_event = { id = autobuild.3 } set_country_flag = auto_build_8 }
	}
	option = {
		name = "auto_build_8_off"
		trigger = {	has_country_flag = auto_build_8 }
		custom_tooltip = auto_build_8_off.tooltip
		hidden_effect = { country_event = { id = autobuild.3 } remove_country_flag = auto_build_8 }
	}
	option = {
		name = "auto_build_9_on"
		trigger = {
			has_technology = "tech_frontier_health"
			not = { has_country_flag = auto_build_9	}
		}
		custom_tooltip = auto_build_9_on.tooltip
		hidden_effect = { country_event = { id = autobuild.3 } set_country_flag = auto_build_9 }
	}
	option = {
		name = "auto_build_9_off"
		trigger = {	has_country_flag = auto_build_9 }
		custom_tooltip = auto_build_9_off.tooltip
		hidden_effect = { country_event = { id = autobuild.3 } remove_country_flag = auto_build_9 }
	}
	option = {
		name = "auto_build_11_on"
		trigger = {
			not = { has_country_flag = auto_build_11 }
			has_technology = "tech_power_hub_1"
		}
		custom_tooltip = auto_build_11_on.tooltip
		hidden_effect = { country_event = { id = autobuild.3 } set_country_flag = auto_build_11 }
	}
	option = {
		name = "auto_build_11_off"
		trigger = {	has_country_flag = auto_build_11 }
		custom_tooltip = auto_build_11_off.tooltip
		hidden_effect = { country_event = { id = autobuild.3 } remove_country_flag = auto_build_11 }
	}
	option = {
		name = "auto_build_12_on"
		trigger = {
			not = { has_country_flag = auto_build_12 }
			has_technology = "tech_mineral_processing_1"
		}
		custom_tooltip = auto_build_12_on.tooltip
		hidden_effect = { country_event = { id = autobuild.3 } set_country_flag = auto_build_12 }
	}
	option = {
		name = "auto_build_12_off"
		trigger = {	has_country_flag = auto_build_12 }
		custom_tooltip = auto_build_12_off.tooltip
		hidden_effect = { country_event = { id = autobuild.3 } remove_country_flag = auto_build_12 }
	}
	option = {
		name = "modmenu_return"
		hidden_effect = { country_event = { id = autobuild.3 }}
	}
}

# on ept tiles settings
country_event = {
	id = autobuild.7
	title = "autobuild.3.name"
	desc = "autobuild.7.desc"
	picture = GFX_evt_alien_city
	is_triggered_only = yes
	
	option = {
		name = "auto_build_7_1"
		trigger = {
			not = {
				has_country_flag = auto_build_7_1
			}
		}
		custom_tooltip = auto_build_7_1.tooltip
		hidden_effect = {
			country_event = { id = autobuild.3 }
			set_country_flag = auto_build_7_1
			remove_country_flag = auto_build_7_7
			remove_country_flag = auto_build_7_2
			remove_country_flag = auto_build_7_3
			remove_country_flag = auto_build_7_4
		##	remove_country_flag = auto_build_7_5
			remove_country_flag = auto_build_7_6
		}
	}
	option = {
		name = "auto_build_7_2"
		trigger = {
			not = {
				has_country_flag = auto_build_7_2
			}
		}
		custom_tooltip = auto_build_7_2.tooltip
		hidden_effect = {
			country_event = { id = autobuild.3 }
			set_country_flag = auto_build_7_2
			remove_country_flag = auto_build_7_1
			remove_country_flag = auto_build_7_7
			remove_country_flag = auto_build_7_3
			remove_country_flag = auto_build_7_4
		##	remove_country_flag = auto_build_7_5
			remove_country_flag = auto_build_7_6
		}
	}
	option = {
		name = "auto_build_7_3"
		trigger = {
			not = {
				has_country_flag = auto_build_7_3
			}
		}
		custom_tooltip = auto_build_7_3.tooltip
		hidden_effect = {
			country_event = { id = autobuild.3 }
			set_country_flag = auto_build_7_3
			remove_country_flag = auto_build_7_1
			remove_country_flag = auto_build_7_2
			remove_country_flag = auto_build_7_7
			remove_country_flag = auto_build_7_4
		##	remove_country_flag = auto_build_7_5
			remove_country_flag = auto_build_7_6
		}
	}
	option = {
		name = "auto_build_7_4"
		trigger = {
			not = {
				has_country_flag = auto_build_7_4
			}
		}
		custom_tooltip = auto_build_7_4.tooltip
		hidden_effect = {
			country_event = { id = autobuild.3 }
			set_country_flag = auto_build_7_4
			remove_country_flag = auto_build_7_1
			remove_country_flag = auto_build_7_2
			remove_country_flag = auto_build_7_3
			remove_country_flag = auto_build_7_7
		##	remove_country_flag = auto_build_7_5
			remove_country_flag = auto_build_7_6
		}
	}
	option = {
		name = "auto_build_7_6"
		trigger = {
			not = {
				has_country_flag = auto_build_7_6
			}
		}
		custom_tooltip = auto_build_7_6.tooltip
		hidden_effect = {
			country_event = { id = autobuild.3 }
			set_country_flag = auto_build_7_6
			remove_country_flag = auto_build_7_1
			remove_country_flag = auto_build_7_2
			remove_country_flag = auto_build_7_3
			remove_country_flag = auto_build_7_4
		##	remove_country_flag = auto_build_7_5
			remove_country_flag = auto_build_7_7
		}
	}
	option = {
		name = "auto_build_7_7"
		trigger = {
			not = {
				has_country_flag = auto_build_7_7
			}
		}
		custom_tooltip = auto_build_7_7.tooltip
		hidden_effect = {
			country_event = { id = autobuild.3 }
			set_country_flag = auto_build_7_7
			remove_country_flag = auto_build_7_1
			remove_country_flag = auto_build_7_2
			remove_country_flag = auto_build_7_3
			remove_country_flag = auto_build_7_4
		##	remove_country_flag = auto_build_7_5
			remove_country_flag = auto_build_7_6
		}
	}
	option = {
		name = "auto_build_7_8"
		trigger = {
			or = {
				has_country_flag = auto_build_7_1
				has_country_flag = auto_build_7_2
				has_country_flag = auto_build_7_3
				has_country_flag = auto_build_7_4
			##	has_country_flag = auto_build_7_5
				has_country_flag = auto_build_7_6
				has_country_flag = auto_build_7_7
			}
		}
		custom_tooltip = auto_build_7_8.tooltip
		hidden_effect = { country_event = { id = autobuild.3 } set_country_flag = auto_build_7_8 }
	}
	option = {
		name = "auto_build_7_8_off"
		trigger = {	has_country_flag = auto_build_7_8 }
		hidden_effect = { country_event = { id = autobuild.3 } remove_country_flag = auto_build_7_8 }
	}
	option = {
		name = "auto_build_7_9"
		trigger = {
			or = {
				has_country_flag = auto_build_7_1
				has_country_flag = auto_build_7_2
				has_country_flag = auto_build_7_3
				has_country_flag = auto_build_7_4
			##	has_country_flag = auto_build_7_5
				has_country_flag = auto_build_7_6
				has_country_flag = auto_build_7_7
			}
		}
		custom_tooltip = auto_build_7_9.tooltip
		hidden_effect = { country_event = { id = autobuild.3 } set_country_flag = auto_build_7_9 }
	}
	option = {
		name = "auto_build_7_9_off"
		trigger = {	has_country_flag = auto_build_7_9 }
		hidden_effect = { country_event = { id = autobuild.3 } remove_country_flag = auto_build_7_9 }
	}
	option = {
		name = "auto_build_7_10"
		trigger = {
			or = {
				has_country_flag = auto_build_7_1
				has_country_flag = auto_build_7_2
				has_country_flag = auto_build_7_3
				has_country_flag = auto_build_7_4
			##	has_country_flag = auto_build_7_5
				has_country_flag = auto_build_7_6
				has_country_flag = auto_build_7_7
			}
		}
		custom_tooltip = auto_build_7_10.tooltip
		hidden_effect = { country_event = { id = autobuild.3 } set_country_flag = auto_build_7_10 }
	}
	option = {
		name = "auto_build_7_10_off"
		trigger = {	has_country_flag = auto_build_7_10 }
		hidden_effect = { country_event = { id = autobuild.3 } remove_country_flag = auto_build_7_10 }
	}
	option = {
		name = "auto_build_7_11"
		trigger = {
			or = {
				has_country_flag = auto_build_7_1
				has_country_flag = auto_build_7_2
				has_country_flag = auto_build_7_3
				has_country_flag = auto_build_7_4
			##	has_country_flag = auto_build_7_5
				has_country_flag = auto_build_7_6
				has_country_flag = auto_build_7_7
			}
		}
		custom_tooltip = auto_build_7_11.tooltip
		hidden_effect = { country_event = { id = autobuild.3 } set_country_flag = auto_build_7_11 }
	}
	option = {
		name = "auto_build_7_11_off"
		trigger = {	has_country_flag = auto_build_7_11 }
		hidden_effect = { country_event = { id = autobuild.3 } remove_country_flag = auto_build_7_11 }
	}
	option = {
		name = "modmenu_return"
		hidden_effect = { country_event = { id = autobuild.3 }}
	}
}

country_event = {
	id = autobuild.10
	title = OK
	desc = OK
	hide_window = yes
	fire_only_once = yes
	
	trigger = {
		is_ai = no
		has_country_flag = auto_build_cost
		nor = {
			has_country_flag = auto_build_cost_5000
			has_country_flag = auto_build_cost_2500
			has_country_flag = auto_build_cost_1000
			has_country_flag = auto_build_cost_500
			has_country_flag = auto_build_cost_inf_500
			has_country_flag = auto_build_cost_inf_250
			has_country_flag = auto_build_cost_inf_100
		}
	}
	
	immediate = {
		set_country_flag = auto_build_cost_inf_250
		set_country_flag = auto_build_cost_1000
	}
}

country_event = {
	id = autobuild.11
	title = OK
	desc = OK
	hide_window = yes
	fire_only_once = yes
	
	trigger = {
		is_ai = no
	#	has_country_flag = auto_build_3
	}
	
	immediate = {
		set_variable = {
			which = autobuild_farm_global
			value = 4
		}
	}
}


## on actions events

fleet_event = {
	id = autobuild.107
	title = OK
	desc = OK
	hide_window = yes
	is_triggered_only = yes
	
	trigger = {
		from = {
			any_ship_in_system = {
				is_ship_size = constructor
				exists = owner
				owner = { is_hostile = root.owner }
				fleet = {
					has_fleet_flag = autobuild_fleet
					#fleet_stance = evasive
				}
			}
		}
	}
	
	immediate = {
		from = {
			every_fleet_in_system = {
				limit = {
					has_fleet_flag = autobuild_fleet
				}
				clear_fleet_actions = this
				set_event_locked = no
			#	fleet_event = { id = autobuild.0}
				remove_fleet_flag = autobuild_fleet
			}
		}
	}
}

pop_event = {
	id = autobuild.108
	title = OK
	desc = OK
	hide_window = yes
	is_triggered_only = yes
	
	trigger = {
		exists = planet
	}
	
	immediate = {
		planet = {
			planet_event = { id = autobuild.101 }
		}
	}
}

	
## remove planetary modifiers and flag
country_event = {
	id = autobuild.99
	title = OK
	desc = OK
	hide_window = yes
	is_triggered_only = yes
	
	immediate = {
		every_owned_planet = {
			limit = {
				or = {
					has_modifier = "free_from_auto_update"
					has_modifier = "free_from_auto_enslave"
					has_modifier = "free_from_auto_build"
					has_modifier = "planet_labs_auto_build"
					has_modifier = "planet_forge_auto_build"
					has_modifier = "planet_power_plant_auto_build"
					has_modifier = "planet_farms_auto_build"
				}
			}
			remove_modifier = "free_from_auto_update"
			remove_modifier = "free_from_auto_build"
			remove_modifier = "free_from_auto_enslave"
			remove_modifier = "planet_labs_auto_build"
			remove_modifier = "planet_forge_auto_build"
			remove_modifier = "planet_power_plant_auto_build"
			remove_modifier = "planet_farms_auto_build"
		}
		every_owned_fleet = {
			limit = {
				is_ship_class = shipclass_constructor
				has_fleet_flag = autobuild_fleet
			}
			clear_fleet_actions = this
			set_event_locked = no
			remove_fleet_flag = autobuild_fleet
		}
		remove_country_flag = auto_build_1
		remove_country_flag = auto_build_2
		remove_country_flag = auto_build_3
		remove_country_flag = auto_build_4
		remove_country_flag = auto_build_4_1
		remove_country_flag = auto_build_4_2
		remove_country_flag = auto_build_5
		remove_country_flag = auto_build_6
		remove_country_flag = auto_build_7_8
		remove_country_flag = auto_build_7_9
		remove_country_flag = auto_build_7_10
		remove_country_flag = auto_build_7_11
		remove_country_flag = auto_build_8
		remove_country_flag = auto_build_9
		remove_country_flag = auto_build_10
		remove_country_flag = auto_build_11
		remove_country_flag = auto_build_cost_5000
		remove_country_flag = auto_build_cost_2500
		remove_country_flag = auto_build_cost_1000
		remove_country_flag = auto_build_cost_500
		remove_country_flag = auto_build_cost_inf_500
		remove_country_flag = auto_build_cost_inf_250
		remove_country_flag = auto_build_cost_inf_100
		remove_country_flag = auto_build_farm_replace
		remove_country_flag = auto_build_fleet
		remove_country_flag = auto_build_cost
		remove_global_flag = hide_autobuild_planetary_edicts
	}
}